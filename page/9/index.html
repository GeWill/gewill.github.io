<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.17.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
<meta property="og:type" content="website">
<meta property="og:title" content="Will&#39;s Blog">
<meta property="og:url" content="http://example.com/page/9/index.html">
<meta property="og:site_name" content="Will&#39;s Blog">
<meta property="og:description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Ge Will">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/9/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/9/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Will's Blog</title>
  







<head>
    <!-- 霞鹜文楷字体 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/style.css"/>

    <!-- datapulse统计 -->
    <script defer type="text/javascript" src="https://datapulse.app/datapulse.min.js" id="datapulse" data-endpoint="https://datapulse.app/api/v1/event" data-workspace="cljxqml5q0y0f8j37d4futnbl"></script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DR0FC9YJLH"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'G-DR0FC9YJLH');
    </script>

    <!-- 看板娘 -->
    <script src="https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>
</head>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Will's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">194</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">11</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">1</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ge Will"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Ge Will</p>
  <div class="site-description" itemprop="description">The people who are crazy enough to think they can change the world, are the ones who DO.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">194</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/gewill" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;gewill" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:531sunlight@gmail.com" title="E-Mail → mailto:531sunlight@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/gewei" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;gewei" rel="noopener me" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/BoJack_D" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;BoJack_D" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2016/02/27/Autolayout-in-Code/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/02/27/Autolayout-in-Code/" class="post-title-link" itemprop="url">Autolayout in Code</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-02-27 14:14:34" itemprop="dateCreated datePublished" datetime="2016-02-27T14:14:34+08:00">2016-02-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>使用代码自动布局，需求还是有的，虽然很习惯了 IB 来做。参看 Programming iOS 9。</p>
<p>一共三个方法：</p>
<ul>
<li>Anchor notation</li>
<li>Creating constraints in code</li>
<li>Visual format notation</li>
</ul>
<h2 id="1-Anchor-notation"><a href="#1-Anchor-notation" class="headerlink" title="1. Anchor notation"></a>1. Anchor notation</h2><p>感觉 anchor 一个折中的方案，语法比 constraints 简洁，符合 IB 设计和添加约束的思路。美中不足是仅支持 iOS 9。</p>
<blockquote>
<p>The NSLayoutAnchor class is a <strong>factory class</strong> for creating NSLayoutConstraint objects using a fluent API. Use these constraints to programatically define your layout using Auto Layout.</p>
</blockquote>
<p>具体的使用语法都很简单，贴一个书中的 Demo：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> v1 <span class="operator">=</span> <span class="type">UIView</span>(frame: <span class="type">CGRectMake</span>(<span class="number">100</span>, <span class="number">111</span>, <span class="number">132</span>, <span class="number">194</span>))</span><br><span class="line">v1.backgroundColor <span class="operator">=</span> <span class="type">UIColor</span>(red: <span class="number">1</span>, green: <span class="number">0.4</span>, blue: <span class="number">1</span>, alpha: <span class="number">1</span>)</span><br><span class="line"><span class="keyword">let</span> v2 <span class="operator">=</span> <span class="type">UIView</span>()</span><br><span class="line">v2.backgroundColor <span class="operator">=</span> <span class="type">UIColor</span>(red: <span class="number">0.5</span>, green: <span class="number">1</span>, blue: <span class="number">0</span>, alpha: <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">mainview.addSubview(v1)</span><br><span class="line">v1.addSubview(v2)</span><br><span class="line"></span><br><span class="line">v2.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> which: <span class="type">Int</span> &#123; <span class="keyword">return</span> <span class="number">3</span> &#125;</span><br><span class="line"><span class="keyword">switch</span> which &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="comment">// the old way, and this is the last time I&#x27;m going to show this</span></span><br><span class="line">    v1.addConstraint(</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>(item: v2,</span><br><span class="line">                           attribute: .<span class="type">Leading</span>,</span><br><span class="line">                           relatedBy: .<span class="type">Equal</span>,</span><br><span class="line">                           toItem: v1,</span><br><span class="line">                           attribute: .<span class="type">Leading</span>,</span><br><span class="line">                           multiplier: <span class="number">1</span>, constant: <span class="number">0</span>)</span><br><span class="line">    )</span><br><span class="line">    v1.addConstraint(</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>(item: v2,</span><br><span class="line">                           attribute: .<span class="type">Trailing</span>,</span><br><span class="line">                           relatedBy: .<span class="type">Equal</span>,</span><br><span class="line">                           toItem: v1,</span><br><span class="line">                           attribute: .<span class="type">Trailing</span>,</span><br><span class="line">                           multiplier: <span class="number">1</span>, constant: <span class="number">0</span>)</span><br><span class="line">    )</span><br><span class="line">    v1.addConstraint(</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>(item: v2,</span><br><span class="line">                           attribute: .<span class="type">Top</span>,</span><br><span class="line">                           relatedBy: .<span class="type">Equal</span>,</span><br><span class="line">                           toItem: v1,</span><br><span class="line">                           attribute: .<span class="type">Top</span>,</span><br><span class="line">                           multiplier: <span class="number">1</span>, constant: <span class="number">0</span>)</span><br><span class="line">    )</span><br><span class="line">    v2.addConstraint(</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>(item: v2,</span><br><span class="line">                           attribute: .<span class="type">Height</span>,</span><br><span class="line">                           relatedBy: .<span class="type">Equal</span>,</span><br><span class="line">                           toItem: <span class="literal">nil</span>,</span><br><span class="line">                           attribute: .<span class="type">NotAnAttribute</span>,</span><br><span class="line">                           multiplier: <span class="number">1</span>, constant: <span class="number">10</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="comment">// new API in iOS 9 for making constraints individually</span></span><br><span class="line">    <span class="comment">// and we should now be activating constraints, not adding them...</span></span><br><span class="line">    <span class="comment">// to a specific view</span></span><br><span class="line">    <span class="comment">// whereever possible, activate all the constraints at once</span></span><br><span class="line">    <span class="type">NSLayoutConstraint</span>.activateConstraints([</span><br><span class="line">        v2.leadingAnchor.constraintEqualToAnchor(v1.leadingAnchor),</span><br><span class="line">        v2.trailingAnchor.constraintEqualToAnchor(v1.trailingAnchor),</span><br><span class="line">        v2.topAnchor.constraintEqualToAnchor(v1.topAnchor),</span><br><span class="line">        v2.heightAnchor.constraintEqualToConstant(<span class="number">10</span>),</span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment">// NSDictionaryOfVariableBindings(v2,v3) // it&#x27;s a macro, no macros in Swift</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// let d = [&quot;v2&quot;:v2,&quot;v3&quot;:v3]</span></span><br><span class="line">    <span class="comment">// okay, that&#x27;s boring...</span></span><br><span class="line">    <span class="comment">// let&#x27;s write our own Swift NSDictionaryOfVariableBindings substitute (sort of)</span></span><br><span class="line">    <span class="keyword">let</span> d <span class="operator">=</span> dictionaryOfNames(v1, v2, v3)</span><br><span class="line">    <span class="type">NSLayoutConstraint</span>.activateConstraints([</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.constraintsWithVisualFormat(</span><br><span class="line">            <span class="string">&quot;H:|[v2]|&quot;</span>, options: [], metrics: <span class="literal">nil</span>, views: d),</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.constraintsWithVisualFormat(</span><br><span class="line">            <span class="string">&quot;V:|[v2(10)]&quot;</span>, options: [], metrics: <span class="literal">nil</span>, views: d),</span><br><span class="line">    ].flatten().map &#123; <span class="variable">$0</span> &#125;)</span><br><span class="line"><span class="keyword">default</span>: <span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">dictionaryOfNames</span>(<span class="params">arr</span>: <span class="type">UIView</span>...) -&gt; [<span class="type">String</span>: <span class="type">UIView</span>] &#123;</span><br><span class="line">    <span class="keyword">var</span> d <span class="operator">=</span> [<span class="type">String</span>: <span class="type">UIView</span>]()</span><br><span class="line">    <span class="keyword">for</span> (ix, v) <span class="keyword">in</span> arr.enumerate() &#123;</span><br><span class="line">        d[<span class="string">&quot;v<span class="subst">\(ix <span class="operator">+</span> <span class="number">1</span>)</span>&quot;</span>] <span class="operator">=</span> v</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> d</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-Creating-constraints-in-code"><a href="#2-Creating-constraints-in-code" class="headerlink" title="2. Creating constraints in code"></a>2. Creating constraints in code</h2><p>兼容 iOS 8 以下的，但是超级啰嗦。</p>
<ul>
<li>iOS 6 可以<strong>全部使用最外面的视图</strong>添加约束，下面 Demo 中的：container.addConstraint(s) &#x2F; removeConstraints</li>
<li>iOS 8 直接使用：NSLayoutConstraint.activateConstraints &#x2F; deactivateConstraints</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_">UIViewController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> container <span class="operator">=</span> <span class="type">UIView</span>(frame: <span class="keyword">self</span>.view.bounds)</span><br><span class="line">        container.backgroundColor <span class="operator">=</span> <span class="type">UIColor</span>(red: <span class="number">0.0</span>, green: <span class="number">0.0</span>, blue: <span class="number">0.0</span>, alpha: <span class="number">0.252461163294798</span>)</span><br><span class="line">        <span class="keyword">self</span>.view.addSubview(container)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> aLine <span class="operator">=</span> <span class="type">UIView</span>()</span><br><span class="line">        aLine.frame <span class="operator">=</span> <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">5</span>, height: <span class="number">5</span>)</span><br><span class="line">        aLine.backgroundColor <span class="operator">=</span> <span class="type">UIColor</span>(red: <span class="number">0.6667</span>, green: <span class="number">0.0742</span>, blue: <span class="number">0.6667</span>, alpha: <span class="number">1.0</span>)</span><br><span class="line">        container.addSubview(aLine)</span><br><span class="line"></span><br><span class="line">        aLine.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> i <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (i) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            <span class="comment">// MARK:-  superview addConstraint</span></span><br><span class="line">            container.addConstraint(<span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Leading</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Leading</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>))</span><br><span class="line">            container.addConstraint(<span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Trailing</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Trailing</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>))</span><br><span class="line">            container.addConstraint(<span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Top</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Top</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>))</span><br><span class="line">            aLine.addConstraint(<span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Height</span>, relatedBy: .<span class="type">Equal</span>, toItem: <span class="literal">nil</span>, attribute: .<span class="type">NotAnAttribute</span>, multiplier: <span class="number">1</span>, constant: <span class="number">20</span>))</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="comment">// MARK:- iOS 6</span></span><br><span class="line">            container.addConstraints([</span><br><span class="line">                <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Leading</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Leading</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>),</span><br><span class="line">                <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Trailing</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Trailing</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>),</span><br><span class="line">                <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Top</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Top</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>),</span><br><span class="line">                <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Height</span>, relatedBy: .<span class="type">Equal</span>, toItem: <span class="literal">nil</span>, attribute: .<span class="type">NotAnAttribute</span>, multiplier: <span class="number">1</span>, constant: <span class="number">20</span>),</span><br><span class="line">            ])</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="comment">// MARK:- active = true</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">#available</span>(<span class="keyword">iOS</span> <span class="number">8.0</span>, <span class="operator">*</span>) &#123;</span><br><span class="line">                <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Leading</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Leading</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>).active <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Trailing</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Trailing</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>).active <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Top</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Top</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>).active <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Height</span>, relatedBy: .<span class="type">Equal</span>, toItem: <span class="literal">nil</span>, attribute: .<span class="type">NotAnAttribute</span>, multiplier: <span class="number">1</span>, constant: <span class="number">20</span>).active <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            <span class="comment">// MARK:- NSLayoutConstraint.activateConstraints</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">#available</span>(<span class="keyword">iOS</span> <span class="number">8.0</span>, <span class="operator">*</span>) &#123;</span><br><span class="line">                <span class="type">NSLayoutConstraint</span>.activateConstraints([</span><br><span class="line">                    <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Leading</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Leading</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>),</span><br><span class="line">                    <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Trailing</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Trailing</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>),</span><br><span class="line">                    <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Top</span>, relatedBy: .<span class="type">Equal</span>, toItem: container, attribute: .<span class="type">Top</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>),</span><br><span class="line">                    <span class="type">NSLayoutConstraint</span>(item: aLine, attribute: .<span class="type">Height</span>, relatedBy: .<span class="type">Equal</span>, toItem: <span class="literal">nil</span>, attribute: .<span class="type">NotAnAttribute</span>, multiplier: <span class="number">1</span>, constant: <span class="number">20</span>),</span><br><span class="line">                ])</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="3-Visual-format-notation"><a href="#3-Visual-format-notation" class="headerlink" title="3. Visual format notation"></a>3. Visual format notation</h2><p>这个语法支持 iOS 6，而且语法最为简洁直观。也是<br>Programming iOS 9 书中推荐的方案。实际项目尝试了上面两种两种方法后，想要更短的代码量的话，还是 Visual format notation 最为合适。这里也推荐大家，还很容易理解其语法，而且 console debugging 也会优先显示该语法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;NSLayoutConstraint:0x7f855ad1bb00 H:[UIButton:0x7f855ad1bba0&#x27;Button&#x27;(46@188)] priority:188&gt;</span><br><span class="line"></span><br><span class="line">&lt;NSLayoutConstraint:0x7f855ad1e130 UIButton:0x7f855ad1bba0&#x27;Button&#x27;.leading == UIView:0x7f855ad1ca20.leadingMargin + 127 priority:999&gt;</span><br><span class="line"></span><br><span class="line">Unable to simultaneously satisfy constraints.</span><br><span class="line">	Probably at least one of the constraints in the following list is one you don&#x27;t want. </span><br><span class="line">	Try this: </span><br><span class="line">		(1) look at each constraint and try to figure out which you don&#x27;t expect; </span><br><span class="line">		(2) find the code that added the unwanted constraint or constraints and fix it. </span><br><span class="line">(</span><br><span class="line">    &quot;&lt;NSLayoutConstraint:0x15c5ab880 V:[UIView:0x15c63d860(20)]&gt;&quot;,</span><br><span class="line">    &quot;&lt;NSLayoutConstraint:0x15c5abb60 V:[UIView:0x15c63d860(10)]&gt;&quot;</span><br></pre></td></tr></table></figure>

<p>当然这些都是不用 IB 和 View Debugging &#x2F; Reveal 情况下的选择。</p>
<p>还有个优点就是类 ASCII-art，可视化的样式描述。</p>
<blockquote>
<p>The Visual Format Language lets you use ASCII-art like strings to define your constraints. This provides a visually descriptive representation of the constraints. </p>
</blockquote>
<p>下面是一个 CustomToolBar 的 Demo：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> Swift NSDictionaryOfVariableBindings substitute</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> - parameter arr: UIView array: (view1, view2)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> - returns: return [&quot;v1&quot;: UIView, &quot;v2&quot;: view2]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">dictionaryOfNames</span>(<span class="params">arr</span>: <span class="type">UIView</span> <span class="operator">...</span>) -&gt; [<span class="type">String</span>: <span class="type">UIView</span>] &#123;</span><br><span class="line">    <span class="keyword">var</span> d <span class="operator">=</span> [<span class="type">String</span>: <span class="type">UIView</span>]()</span><br><span class="line">    <span class="keyword">for</span> (ix, v) <span class="keyword">in</span> arr.enumerate() &#123;</span><br><span class="line">        d[<span class="string">&quot;v<span class="subst">\(ix<span class="operator">+</span><span class="number">1</span>)</span>&quot;</span>] <span class="operator">=</span> v</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> d</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CustomToolBar</span>: <span class="title class_">UIView</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> textField: <span class="type">UITextField</span>!</span><br><span class="line">    <span class="keyword">var</span> commentCountButton: <span class="type">UIButton</span>!</span><br><span class="line">    <span class="keyword">var</span> commentImageButton: <span class="type">UIButton</span>!</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(<span class="params">frame</span>: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.backgroundColor <span class="operator">=</span> <span class="type">UIColor</span>.whiteColor()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init?</span>(<span class="params">coder</span> <span class="params">aDecoder</span>: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>(<span class="string">&quot;init(coder:) has not been implemented&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">drawRect</span>(<span class="params">rect</span>: <span class="type">CGRect</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> topLine <span class="operator">=</span> <span class="type">UIView</span>()</span><br><span class="line">        topLine.backgroundColor <span class="operator">=</span> <span class="type">UIColor</span>(red: <span class="number">0.6</span>, green: <span class="number">0.6</span>, blue: <span class="number">0.6</span>, alpha: <span class="number">1.0</span>)</span><br><span class="line">        <span class="keyword">self</span>.addSubview(topLine)</span><br><span class="line"></span><br><span class="line">        textField <span class="operator">=</span> <span class="type">UITextField</span>()</span><br><span class="line">        textField.placeholder <span class="operator">=</span> <span class="string">&quot;Write some in your deep mind.&quot;</span></span><br><span class="line">        <span class="keyword">self</span>.addSubview(textField)</span><br><span class="line"></span><br><span class="line">        commentImageButton <span class="operator">=</span> <span class="type">UIButton</span>(type: .<span class="type">Custom</span>)</span><br><span class="line">        commentImageButton.setBackgroundImage(<span class="type">UIImage</span>(named: <span class="string">&quot;comment&quot;</span>), forState: .<span class="type">Normal</span>)</span><br><span class="line">        <span class="keyword">self</span>.addSubview(commentImageButton)</span><br><span class="line"></span><br><span class="line">        commentCountButton <span class="operator">=</span> <span class="type">UIButton</span>(type: .<span class="type">Custom</span>)</span><br><span class="line">        commentCountButton.titleLabel<span class="operator">?</span>.font <span class="operator">=</span> <span class="type">UIFont</span>.systemFontOfSize(<span class="number">14</span>)</span><br><span class="line">        commentCountButton.setTitle(<span class="string">&quot;8888888888&quot;</span>, forState: .<span class="type">Normal</span>)</span><br><span class="line">        commentCountButton.setTitleColor(<span class="type">UIColor</span>.blackColor(), forState: .<span class="type">Normal</span>)</span><br><span class="line">        <span class="keyword">self</span>.addSubview(commentCountButton)</span><br><span class="line"></span><br><span class="line">        topLine.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textField.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        commentImageButton.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        commentCountButton.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// NSLayoutConstraintsHelper.swift</span></span><br><span class="line">        <span class="keyword">let</span> d <span class="operator">=</span> dictionaryOfNames(topLine, textField, commentImageButton, commentCountButton)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.addConstraints([</span><br><span class="line">            <span class="type">NSLayoutConstraint</span>.constraintsWithVisualFormat(<span class="string">&quot;H:|[v1]|&quot;</span>, options: [], metrics: <span class="literal">nil</span>, views: d),</span><br><span class="line">            <span class="type">NSLayoutConstraint</span>.constraintsWithVisualFormat(<span class="string">&quot;V:|[v1(0.5)]&quot;</span>, options: [], metrics: <span class="literal">nil</span>, views: d),</span><br><span class="line"></span><br><span class="line">        	<span class="type">NSLayoutConstraint</span>.constraintsWithVisualFormat(<span class="string">&quot;H:|-15-[v2]-[v3(14)][v4]-|&quot;</span>, options: .<span class="type">AlignAllCenterY</span>, metrics: <span class="literal">nil</span>, views: d),</span><br><span class="line">            <span class="type">NSLayoutConstraint</span>.constraintsWithVisualFormat(<span class="string">&quot;V:|-[v2]-|&quot;</span>, options: [], metrics: <span class="literal">nil</span>, views: d),</span><br><span class="line">            <span class="type">NSLayoutConstraint</span>.constraintsWithVisualFormat(<span class="string">&quot;V:[v3(14)]&quot;</span>, options: [], metrics: <span class="literal">nil</span>, views: d),</span><br><span class="line">            <span class="type">NSLayoutConstraint</span>.constraintsWithVisualFormat(<span class="string">&quot;V:[v4(14)]&quot;</span>, options: [], metrics: <span class="literal">nil</span>, views: d),</span><br><span class="line">        ].flatten().map &#123; <span class="variable">$0</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>经过几次项目的实践，发现还是 Visual Format 最好用，简洁直观。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li>UILayoutGuide – Auto Layout’s Invisible Helpers:<br>  <a target="_blank" rel="noopener" href="https://www.captechconsulting.com/blogs/uilayoutguide--auto-layouts-invisible-helpers">https://www.captechconsulting.com/blogs/uilayoutguide--auto-layouts-invisible-helpers</a></li>
<li>Programmatically Creating Constraints:<br>  <a target="_blank" rel="noopener" href="https://developer.apple.com/library/prerelease/ios/documentation/UserExperience/Conceptual/AutolayoutPG/ProgrammaticallyCreatingConstraints.html#//apple_ref/doc/uid/TP40010853-CH16-SW1">https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/ProgrammaticallyCreatingConstraints.html#//apple_ref&#x2F;doc&#x2F;uid&#x2F;TP40010853-CH16-SW1</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2016/02/24/Effective-Objective-C-2-0-Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/02/24/Effective-Objective-C-2-0-Notes/" class="post-title-link" itemprop="url">Effective Objective-C 2.0 - 笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-02-24 17:23:16" itemprop="dateCreated datePublished" datetime="2016-02-24T17:23:16+08:00">2016-02-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在 Swift 大行其道，Objective-C 渐行渐远的今天，这本书看起来还是获益匪浅。按照52条方法目录摘录一些笔记。</p>
<h2 id="1-了解-Objective-C-语言的起源"><a href="#1-了解-Objective-C-语言的起源" class="headerlink" title="1. 了解 Objective-C 语言的起源"></a>1. 了解 Objective-C 语言的起源</h2><p>Objective-C 为 C 语言添加了面向对象的特性，是其超集。Objective-C 使用动态绑定的消息结构，运行时才会检查对象的类型。接受一条消息后，究竟执行何种代码，由运行期环境而非编译器决定。</p>
<h2 id="5-用枚举表示状态、选项、状态吗"><a href="#5-用枚举表示状态、选项、状态吗" class="headerlink" title="5. 用枚举表示状态、选项、状态吗"></a>5. 用枚举表示状态、选项、状态吗</h2><h2 id="6-理解-“属性”可以概念"><a href="#6-理解-“属性”可以概念" class="headerlink" title="6. 理解 “属性”可以概念"></a>6. 理解 “属性”可以概念</h2><p>自动合成属性：<code>@property</code>，指定实例变量名称：<code>@synthesize</code>，属性特质：原子性&#x2F;读写权限&#x2F;读写方法名&#x2F;内存管理，都做有详细的解释，就不在此赘述了。</p>
<h2 id="7-在对象内部尽量直接访问实例变量"><a href="#7-在对象内部尽量直接访问实例变量" class="headerlink" title="7. 在对象内部尽量直接访问实例变量"></a>7. 在对象内部尽量直接访问实例变量</h2><p>直接访问实例变量：</p>
<ul>
<li>不经过方法派发（method dispatch）</li>
<li>不调用设置方法（access methods）</li>
<li>不触发键值观测（KVO）</li>
<li>惰性初始化（lazy initialization）无法完成</li>
</ul>
<h2 id="11-理解-objc-msgSend-的作用"><a href="#11-理解-objc-msgSend-的作用" class="headerlink" title="11. 理解 objc_msgSend 的作用"></a>11. 理解 objc_msgSend 的作用</h2><p>例如：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">id</span> returnValue = [someObject messageName: parameter];</span><br></pre></td></tr></table></figure>
<p>someObject 叫做接受者（receiver），messageName 叫做选择子（selector），选择子和参数合起来称为消息（message）。编译器看到消息后将其转换为一条标准的 C 语言函数调用，所调用函数 objc_msgSend，原型如下：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> objc_msgSend(<span class="type">id</span> <span class="keyword">self</span>, SEL cmd, ...)</span><br></pre></td></tr></table></figure>
<p>编译器会把消息转换为如下函数：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">id</span> returnValue = objc_msgSend(someObject, </span><br><span class="line">							  <span class="keyword">@selector</span>(messageName:), </span><br><span class="line">							  parameter);</span><br></pre></td></tr></table></figure>
<p>objc_msgSend 函数会依据接受者与选择子的类型，来搜寻接受者所属的类中方法列表（list of methods ），找到就跳至实现代码。若找不到就沿着继承体系向上查找。最终找不到就执行消息转发（message forwarding）。</p>
<blockquote>
<p>未完</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2016/02/15/Before-Sunrise-Review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/02/15/Before-Sunrise-Review/" class="post-title-link" itemprop="url">Before Sunrise - Review</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-02-15 12:10:46" itemprop="dateCreated datePublished" datetime="2016-02-15T12:10:46+08:00">2016-02-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>几乎都是两个人的对话，从双方羞涩的看向对方，到因为一对德国夫妻吵架而对视。男主鼓起勇气就此打开话题，聊天聊地，就此很愉快的旅程开始了。不管现实生活和情感是否顺利，但是两人总有新的话题和趣闻。当 Jesse 邀请下车游玩时候故事才真正开始。</p>
<p>开始的找有趣的地方，到后来随意的逛街道，酒吧，看手相，看日落，餐厅里互打电话，晚上草地聊天，次日火车道别。两人不太想落入俗套的留电话地址的偶遇，固执的开始时声明不留电话。因此格外珍惜相遇的这一天，玩的尽兴，聊得深入心灵。酒吧里算是爱情观的吐槽：人总是寻求被爱的多一点。也都是害怕重新承受之前恋爱分手之痛。看手相部分引起了一些争执，Jesse 理性的戳穿手相师和填词诗人的把戏，Céline 的满足和感动都搅合了。餐厅里的打电话很有意思，感觉 Céline 的很多时候也是主动地吐露情愫。</p>
<p>最后火车送别明明很不舍，但双方还是很坚持之前的想法不把这次邂逅变成俗套的艳遇。不过最后也做了妥协，约定六个月后此地在相见，还因为从今天还是昨天算起而争执了一番。说明内心是多么的喜欢对方，却又害怕伤害的顾忌而妥协。</p>
<p>电影里面男女主角都是普通的人的性格特点和际遇，但因为相互吸引和聚到一起，一天虽短，但却异常有趣。或者这样的爱情很奢侈，但是或者这就是不讲婚姻时纯粹的爱情。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2016/01/21/Auto-Layout-Guide-Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/01/21/Auto-Layout-Guide-Notes/" class="post-title-link" itemprop="url">Auto Layout Guide - Notes</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-01-21 14:56:03" itemprop="dateCreated datePublished" datetime="2016-01-21T14:56:03+08:00">2016-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Auto Layout Guide: <a target="_blank" rel="noopener" href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/index.html#//apple_ref/doc/uid/TP40010853-CH7-SW1">https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/index.html#//apple_ref&#x2F;doc&#x2F;uid&#x2F;TP40010853-CH7-SW1</a></p>
<ul>
<li>优先使用 stack view，可简化设置（个人认为还是有时候还是非常复杂的布局还是不用，增加复杂度）</li>
<li>Constraint等式表示相等，而非赋值，表示两个 view 的关系</li>
<li>From the view’s intrinsic content size, it’s  easy to understand: Compression Resistance &amp; Content Hugging. </li>
<li>尽量和最邻居的 view 建立 Constraint</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/12/25/Auto-Layout-Cell-Height/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/12/25/Auto-Layout-Cell-Height/" class="post-title-link" itemprop="url">Auto Layout Cell Height</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-12-25 12:40:30" itemprop="dateCreated datePublished" datetime="2015-12-25T12:40:30+08:00">2015-12-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>参考文章 <a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s?__biz=MzA3NzM0NzkxMQ==&mid=402970654&idx=2&sn=cd5a79255f4aafe79c6daf0ea7f6c593&scene=0#wechat_redirect">iOS开发 - 处理不等高TableViewCell的小花招</a>，实践出真知，也是费了一番力气才把文章 Cell 使用 Auto Layout自动算高。眼高手低总是有的，所以以后不仅要学习开发的思路方法论，重要是在实践一遍。</p>
<p>Auto Layout设置好高度约束。不要实现<code>- (CGFloat)tableView:(UITableView *)tableView estimatedHeightForRowAtIndexPath:(NSIndexPath *)indexPath</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="type">void</span>)viewDidLoad &#123;</span><br><span class="line">  [<span class="variable language_">super</span> viewDidLoad];</span><br><span class="line"></span><br><span class="line"><span class="keyword">self</span>.tableView.estimatedRowHeight = <span class="number">100</span>;  <span class="comment">//  随便设个不那么离谱的值</span></span><br><span class="line">  <span class="keyword">self</span>.tableView.rowHeight = <span class="built_in">UITableViewAutomaticDimension</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">- (TableViewCell *)tableView:(<span class="built_in">UITableView</span> *)tableView</span><br><span class="line">       cellForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath &#123;</span><br><span class="line">  TableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:<span class="string">@&quot;cell&quot;</span></span><br><span class="line">                                                        forIndexPath:indexPath];</span><br><span class="line">  cell.avatar.image = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@&quot;avatar&quot;</span>];</span><br><span class="line">  cell.name.text = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@&quot;%ld&quot;</span>, indexPath.row % <span class="number">2</span>];</span><br><span class="line">  cell.time.text = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@&quot;%@&quot;</span>, [<span class="built_in">NSDate</span> date]];</span><br><span class="line">  cell.source.text = <span class="string">@&quot;Weibo.com&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">NSMutableString</span> *str = [<span class="built_in">NSMutableString</span> new];</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">long</span> i = <span class="number">1</span>; i &lt; indexPath.row; i++) &#123;</span><br><span class="line">    [str appendString:<span class="string">@&quot;The 1989 World Tour (Live)&quot;</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  [str appendString:<span class="string">@&quot;END!!!&quot;</span>];</span><br><span class="line">  cell.text.text = str;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//移除多余边框，如果是图片是 Aspect Fill 或者 Aspect Fit</span></span><br><span class="line">  cell.pic.layer.borderColor = [<span class="built_in">UIColor</span> clearColor].CGColor;</span><br><span class="line">  cell.pic.layer.borderWidth = <span class="number">0.1</span>;</span><br><span class="line">  cell.pic.layer.masksToBounds = <span class="literal">YES</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (indexPath.row % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">    cell.pic.image = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@&quot;pic&quot;</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    cell.pic.image = <span class="literal">nil</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> cell;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>源码：<a target="_blank" rel="noopener" href="https://github.com/gewill/test-projects/tree/master/test%20auto%20height%20cell">https://github.com/gewill/test-projects/tree/master/test%20auto%20height%20cell</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/12/14/Swift-Pointer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/12/14/Swift-Pointer/" class="post-title-link" itemprop="url">Swift 指针</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-12-14 18:50:57" itemprop="dateCreated datePublished" datetime="2015-12-14T18:50:57+08:00">2015-12-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Swift中的内存指针讲解的很清楚：<a target="_blank" rel="noopener" href="http://onevcat.com/2015/01/swift-pointer/">http://onevcat.com/2015/01/swift-pointer/</a>。<br>Apple期望在Swift中指针能够尽量减少登场几率，因此在Swift中指针被映射为了一个泛型类型，并且还比较抽象。Swift中，指针都使用一个特殊的类型来表示，那就是UnsafePointer<T>。总的来说还是为了方便处理 C API，平时并不需要深入了解。</p>
<p>还有苹果官方博客：<a target="_blank" rel="noopener" href="https://developer.apple.com/swift/blog/?id=6">Interacting with C Pointers</a>。</p>
<p>下面代码是数组指针用法：</p>
<pre><code class="swift">    // Swift Memory UnsafePointer
    var array = [1, 2, 3, 4, 5]
    var arrayPtr = UnsafeMutableBufferPointer&lt;Int&gt;(start: &amp;array, count: array.count)
    // baseAddress 是第一个元素的指针
    var basePtr = arrayPtr.baseAddress as UnsafeMutablePointer&lt;Int&gt;
    print(basePtr.memory) // 1
    basePtr.memory = 10
    print(basePtr.memory) // 10
    //下一个元素
    var nextPtr = basePtr.successor()
    print(nextPtr.memory) // 2
    print(array) // [10, 2, 3, 4, 5]
    
</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/12/14/Array-Copy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/12/14/Array-Copy/" class="post-title-link" itemprop="url">数组拷贝</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-12-14 18:11:22" itemprop="dateCreated datePublished" datetime="2015-12-14T18:11:22+08:00">2015-12-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>源于微信群里一个问题讨论，具体陈铭嘉博客总结的很详细：<a target="_blank" rel="noopener" href="http://www.jianshu.com/p/9a2952c792e6">http://www.jianshu.com/p/9a2952c792e6</a>。</p>
<p>我主要是实践验证一下文章中的代码，其中Swift中的内存指针参看：<a target="_blank" rel="noopener" href="http://onevcat.com/2015/01/swift-pointer/">http://onevcat.com/2015/01/swift-pointer/</a>。</p>
<h2 id="Objective-C-部分："><a href="#Objective-C-部分：" class="headerlink" title="Objective-C 部分："></a>Objective-C 部分：</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一层理解:</span></span><br><span class="line"><span class="comment">//如果对一个不可变容器复制，copy是指针复制，即浅拷贝。</span></span><br><span class="line"><span class="comment">//如果对一个可变容器复制，copy是对象复制，即深拷贝。</span></span><br><span class="line"><span class="built_in">NSArray</span> *array = [<span class="built_in">NSArray</span> array];</span><br><span class="line"><span class="built_in">NSArray</span> *array2 = [array <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%p and %p&quot;</span>, array, array2);</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSMutableArray</span> *marray = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line"><span class="built_in">NSMutableArray</span> *marray2 = [marray <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%p and %p&quot;</span>, marray, marray2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  第二层理解:</span></span><br><span class="line"><span class="comment">//  如果是对可变容器copy,是对象复制,即深拷贝,但拷贝出的是一个不可变容器。</span></span><br><span class="line"><span class="comment">//  如果是对可变容器mutableCopy才符合正确地copy语义,也是对象复制,即深拷贝,这次拷贝出的是一个可变容器。</span></span><br><span class="line"><span class="built_in">NSMutableArray</span> *array3 = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, [array3 <span class="keyword">class</span>]);</span><br><span class="line">[array3 addObject:<span class="string">@&quot;Panda&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSMutableArray</span> *array4 = [array3 mutableCopy];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, [array4 <span class="keyword">class</span>]);</span><br><span class="line">[array4 addObject:<span class="string">@&quot;Lion&quot;</span>]; <span class="comment">//成功</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSMutableArray</span> *array5 = [array3 <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, [array5 <span class="keyword">class</span>]);</span><br><span class="line"><span class="comment">//[array5 addObject:@&quot;Lion&quot;]; //报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  第三层理解:</span></span><br><span class="line"><span class="comment">//  上述的深拷贝其实还不是完全深拷贝,因为第二层的图可以发现mutableCopy的数组仍然共享同样的数组元素。</span></span><br><span class="line"><span class="comment">//  而完全深拷贝即是对数组元素同样的拷贝的真正深拷贝。</span></span><br><span class="line"><span class="built_in">NSMutableArray</span> *marray3 = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">[marray3 addObject:<span class="string">@&quot;Panda&quot;</span>];</span><br><span class="line"><span class="built_in">NSMutableArray</span> *marray4 = [marray3 mutableCopy]; <span class="comment">//一般深拷贝</span></span><br><span class="line">[marray4 addObject:<span class="string">@&quot;Li&quot;</span>];</span><br><span class="line"><span class="built_in">NSMutableArray</span> *marray5 = [<span class="built_in">NSKeyedUnarchiver</span></span><br><span class="line">    unarchiveObjectWithData:</span><br><span class="line">        [<span class="built_in">NSKeyedArchiver</span> archivedDataWithRootObject:marray3]]; <span class="comment">//完全深拷贝</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;数组第一个元素的指针 -&gt; 1:%p \n 2:%p \n 3:%p&quot;</span>, marray3[<span class="number">0</span>], marray4[<span class="number">0</span>], marray5[<span class="number">0</span>]);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;数组的指针 -&gt; 1:%p \n 2:%p \n 3:%p&quot;</span>, marray3, marray4, marray5);</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> 0x7fd2e2501ff0 and 0x7fd2e2501ff0</span><br><span class="line"> 0x7fd2e2500710 and 0x7fd2e2501ff0</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">__NSArrayM</span><br><span class="line">__NSArrayM</span><br><span class="line">__NSArrayI</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> 数组第一个元素的指针 -&gt; 1:0x10c0730a0 </span><br><span class="line"> 2:0x10c0730a0 </span><br><span class="line"> 3:0xa000061646e61505</span><br><span class="line"> 数组的指针 -&gt; 1:0x7fd2e260f7a0 </span><br><span class="line"> 2:0x7fd2e262c230 </span><br><span class="line"> 3:0x7fd2e260b6b0</span><br></pre></td></tr></table></figure>


<h2 id="Swift-部分："><a href="#Swift-部分：" class="headerlink" title="Swift 部分："></a>Swift 部分：</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//copy array swift</span></span><br><span class="line"><span class="keyword">var</span> array1 <span class="operator">=</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">  <span class="keyword">var</span> array4 <span class="operator">=</span> array1</span><br><span class="line">  <span class="keyword">var</span> arrayPtr1 <span class="operator">=</span> <span class="type">UnsafeMutableBufferPointer</span>&lt;<span class="type">Int</span>&gt;(start: <span class="operator">&amp;</span>array1, count: array1.count)</span><br><span class="line">  <span class="keyword">var</span> arrayPtr4 <span class="operator">=</span> <span class="type">UnsafeMutableBufferPointer</span>&lt;<span class="type">Int</span>&gt;(start: <span class="operator">&amp;</span>array4, count: array4.count)</span><br><span class="line">  <span class="built_in">print</span>(array1)</span><br><span class="line">  <span class="built_in">print</span>(array4)</span><br><span class="line">  <span class="built_in">print</span>(arrayPtr1)</span><br><span class="line">  <span class="built_in">print</span>(arrayPtr4)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">array1[<span class="number">0</span>] <span class="operator">=</span> <span class="number">10</span></span><br><span class="line">array1.append(<span class="number">20</span>)</span><br><span class="line">  <span class="built_in">print</span>(array1)</span><br><span class="line">  <span class="built_in">print</span>(array4)</span><br><span class="line">  <span class="keyword">var</span> arrayPtr7 <span class="operator">=</span> <span class="type">UnsafeMutableBufferPointer</span>&lt;<span class="type">Int</span>&gt;(start: <span class="operator">&amp;</span>array1, count: array1.count)</span><br><span class="line">  <span class="keyword">var</span> arrayPtr8 <span class="operator">=</span> <span class="type">UnsafeMutableBufferPointer</span>&lt;<span class="type">Int</span>&gt;(start: <span class="operator">&amp;</span>array4, count: array4.count)</span><br><span class="line">  <span class="built_in">print</span>(arrayPtr7)</span><br><span class="line">  <span class="built_in">print</span>(arrayPtr8)</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3, 4, 5]</span><br><span class="line">[1, 2, 3, 4, 5]</span><br><span class="line">UnsafeMutableBufferPointer(start: 0x00007fb568da65f0, length: 5)</span><br><span class="line">UnsafeMutableBufferPointer(start: 0x00007fb568da65a0, length: 5)</span><br><span class="line">[10, 2, 3, 4, 5, 20]</span><br><span class="line">[1, 2, 3, 4, 5]</span><br><span class="line">UnsafeMutableBufferPointer(start: 0x00007fb568da65f0, length: 6)</span><br><span class="line">UnsafeMutableBufferPointer(start: 0x00007fb568da65a0, length: 5)</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/12/12/Swift-API-Design-Guidelines/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/12/12/Swift-API-Design-Guidelines/" class="post-title-link" itemprop="url">Swift API Design Guidelines｜Swift API设计指南</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-12-12 18:25:57" itemprop="dateCreated datePublished" datetime="2015-12-12T18:25:57+08:00">2015-12-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>原文地址：<a target="_blank" rel="noopener" href="https://swift.org/documentation/api-design-guidelines.html">https://swift.org/documentation/api-design-guidelines.html</a></p>
<blockquote>
<p>These are draft API guidelines being developed as part of the <a target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution">Swift 3.0 effort</a>. 这些 API 指南草稿将作为 Swift 3.0的成果的一部分。</p>
</blockquote>
<h2 id="1-Fundamentals-最基本的"><a href="#1-Fundamentals-最基本的" class="headerlink" title="1. Fundamentals 最基本的"></a>1. Fundamentals 最基本的</h2><h3 id="1-1"><a href="#1-1" class="headerlink" title="1.1."></a>1.1.</h3><p><strong>Clarity at the point of use</strong> is your most important goal. Code is read far more than it is written. 用法的清晰是最重要的目标。阅读代码远远比写重要。</p>
<h3 id="1-2"><a href="#1-2" class="headerlink" title="1.2."></a>1.2.</h3><p><strong>Clarity is more important than brevity</strong>. Although Swift code can be compact, it is a<em>non-goal</em> to enable the smallest possible code with the fewest characters. Brevity in Swift code, where it occurs, is a side-effect of the strong type system and features that naturally reduce boilerplate. 清晰比简洁更重要。尽管 Swift 代码可以很简洁，但是目标却不是以最可能少的单词完成尽少量的代码。Swift 代码中，简洁它是存在的，但也仅仅是强类型系统和特性自然而然产生的意外效果。</p>
<h3 id="1-3"><a href="#1-3" class="headerlink" title="1.3."></a>1.3.</h3><p><strong>Write a Documentation Comment</strong> for every method or property in Swift’s <a target="_blank" rel="noopener" href="https://developer.apple.com/library/mac/documentation/Xcode/Reference/xcode_markup_formatting_ref/">dialect of Markdown</a>. Ideally, the API’s meaning can be understood from its signature and its one- or two-sentence summary: 为每个方法和属性书写注释，并符合<a target="_blank" rel="noopener" href="https://developer.apple.com/library/mac/documentation/Xcode/Reference/xcode_markup_formatting_ref/Headings.html#//apple_ref/doc/uid/TP40016497-CH8-SW1">Swift 版的Markdown语法</a>，通过签名和一两句概要即可理解 API 的含义。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Returns the first index where `element` appears in `self`, </span></span><br><span class="line"><span class="comment">/// or `nil` if `element` is not found. </span></span><br><span class="line"><span class="comment">/// </span></span><br><span class="line"><span class="comment">/// - Complexity: O(`self.count`). </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">func</span> <span class="title function_">indexOf</span>(<span class="params">element</span>: <span class="type">Generator</span>.<span class="type">Element</span>) -&gt; <span class="type">Index</span>? &#123; </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Insights gained by writing documentation can have such a profound impact on your API’s design that it’s a good idea to do it early on. 通过写文档获得的洞察力，可以对你设计 API 产生巨大的影响，因此最好今早的开始做。</p>
<blockquote>
<p>If you are having trouble describing your API’s functionality in simple terms, you may have designed the wrong API. 如果你尝试用简单的术语来描述的你的 API 的功能时都有问题，可能你设计的错误的 API。</p>
</blockquote>
<h2 id="2-Naming-命名"><a href="#2-Naming-命名" class="headerlink" title="2. Naming 命名"></a>2. Naming 命名</h2><h3 id="2-1-Promote-Clear-Usage-提高清晰的使用方法"><a href="#2-1-Promote-Clear-Usage-提高清晰的使用方法" class="headerlink" title="2.1. Promote Clear Usage 提高清晰的使用方法"></a>2.1. Promote Clear Usage 提高清晰的使用方法</h3><h4 id="2-1-1-Include-all-the-words-needed-to-avoid-ambiguity-for-a-person-reading-code-where-the-name-is-used-包含所有必需的单词以避免歧义，当读者看到名字时。"><a href="#2-1-1-Include-all-the-words-needed-to-avoid-ambiguity-for-a-person-reading-code-where-the-name-is-used-包含所有必需的单词以避免歧义，当读者看到名字时。" class="headerlink" title="2.1.1. Include all the words needed to avoid ambiguity for a person reading code where the name is used. 包含所有必需的单词以避免歧义，当读者看到名字时。"></a>2.1.1. <strong>Include all the words needed to avoid ambiguity</strong> for a person reading code where the name is used. 包含所有必需的单词以避免歧义，当读者看到名字时。</h4><p>For example, consider a method that removes the element at a given position within a collection 例如，考虑一个方法用来删除集合类的指定位置的元素</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">removeAt</span>(<span class="params">position</span>: <span class="type">Index</span>) -&gt; <span class="type">Element</span></span><br></pre></td></tr></table></figure>
<p>used as follows: 用法如下</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">empliyees.removeAt(x)</span><br></pre></td></tr></table></figure>
<p>If we were to omit the word <code>At</code> from the method name, it could imply to the reader that the method searches for and removes an element equal to <code>x</code>, rather than using <code>x</code> to indicate the position of the element to remove. 如果省略方法名中的单词<code>At</code>，对于读者将意味着这个方法可以搜索并移除一个等于<code>x</code>的元素，而非表示使用<code>x</code>定位将要移除的元素的位置。</p>
  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">employees.remove(x) <span class="comment">// unclear: are we removing x?</span></span><br></pre></td></tr></table></figure>
<h4 id="2-1-2-Omit-Needless-Words-Every-word-in-a-name-should-convey-salient-information-at-the-use-site-删除多余的单词。名字中每一个单词都表达出使用时的主要信息。"><a href="#2-1-2-Omit-Needless-Words-Every-word-in-a-name-should-convey-salient-information-at-the-use-site-删除多余的单词。名字中每一个单词都表达出使用时的主要信息。" class="headerlink" title="2.1.2.  Omit Needless Words. Every word in a name should convey salient information at the use site. 删除多余的单词。名字中每一个单词都表达出使用时的主要信息。"></a>2.1.2.  <a href="undefined"><strong>Omit Needless Words</strong></a>. Every word in a name should convey salient information at the use site. 删除多余的单词。名字中每一个单词都表达出使用时的主要信息。</h4><p>More words may be needed to clarify intent or disambiguate meaning, but those that are redundant with information the reader already possesses should be omitted. In particular, omit words that merely repeat type information: 可能需要更多单词来明确意图或消除歧义，但是多余的信息读者可能会忽略。尤其要删除那些仅仅指明类型信息的单词。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">removeElement</span>(<span class="params">member</span>: <span class="type">Element</span>) -&gt; <span class="type">Element</span>?  allViews.removeElement(cancelButton) </span><br></pre></td></tr></table></figure>


<p>In this case, the word Element adds nothing salient at the call site. This API would be better: 本例中，Element 这个单词在调用时并没有显著的作用。下面这个 API 可能更好。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">remove</span>(<span class="params">member</span>: <span class="type">Element</span>) -&gt; <span class="type">Element</span>?  allViews.remove(cancelButton) <span class="comment">// clearer </span></span><br></pre></td></tr></table></figure>


<p>Occasionally, repeating type information is necessary to avoid ambiguity, but in general it is better to use a word that describes a parameter’s role rather than its type. See the next item for details. 个别情况下，重复类型信息室必要的，以避免歧义。但通常来说，使用表示参数的作用单词要比类型信息的单词的更好。下一条项目将会详细讲解。</p>
<h4 id="2-1-3-Compensate-For-Weak-Type-Information-as-needed-to-clarify-a-parameter’s-role-对弱类型的补充说明参数的作用描述信息。"><a href="#2-1-3-Compensate-For-Weak-Type-Information-as-needed-to-clarify-a-parameter’s-role-对弱类型的补充说明参数的作用描述信息。" class="headerlink" title="2.1.3.  Compensate For Weak Type Information as needed to clarify a parameter’s role. 对弱类型的补充说明参数的作用描述信息。"></a>2.1.3.  <a href="undefined"><strong>Compensate For Weak Type Information</strong></a> as needed to clarify a parameter’s <strong>role</strong>. 对弱类型的补充说明参数的作用描述信息。</h4><p>Especially when a parameter type is <code>NSObject</code>, <code>Any</code>, <code>AnyObject</code>, or a fundamental type such <code>Int</code> or <code>String</code>, type information and context at the point of use may not fully convey intent. 尤其是当参数类型是<code>NSObject</code>，<code>Any</code>，<code>AnyObject</code> 或者最基本的类型如  <code>Int</code> 或 <code>String</code>，这时候类型信息和使用时的上下文可能不能完全表达出意图。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">addObserver</span>(<span class="keyword">_</span> <span class="params">observer</span>: <span class="type">NSObject</span>, <span class="params">forKeyPath</span> <span class="params">path</span>: <span class="type">String</span>) </span><br><span class="line">grid.addObserver(<span class="keyword">self</span>, forKeyPath: graphics) <span class="comment">// clear</span></span><br></pre></td></tr></table></figure>
<p>To restore clarity, precede each weakly-typed parameter with a noun describing its role: 回归到清晰，优先添加描述作用的名词来命名弱类型参数</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">addObserver</span>(<span class="keyword">_</span> <span class="params">observer</span>: <span class="type">NSObject</span>, <span class="params">forKeyPath</span> <span class="params">path</span>: <span class="type">String</span>) </span><br><span class="line">grid.addObserver(<span class="keyword">self</span>, forKeyPath: graphics) <span class="comment">// clear</span></span><br></pre></td></tr></table></figure>


<h3 id="2-2-Be-Grammatical-遵循语法规则"><a href="#2-2-Be-Grammatical-遵循语法规则" class="headerlink" title="2.2. Be Grammatical 遵循语法规则"></a>2.2. Be Grammatical 遵循语法规则</h3><h4 id="2-2-1-Uses-of-mutating-methods-should-read-as-imperative-verb-phrases-e-g-x-reverse-x-sort-x-append-y-变异的方法应该使用命令式的动词短语。"><a href="#2-2-1-Uses-of-mutating-methods-should-read-as-imperative-verb-phrases-e-g-x-reverse-x-sort-x-append-y-变异的方法应该使用命令式的动词短语。" class="headerlink" title="2.2.1. Uses of mutating methods should read as imperative verb phrases, e.g.,x.reverse(), x.sort(), x.append(y). 变异的方法应该使用命令式的动词短语。"></a>2.2.1. Uses of <strong>mutating methods should read as imperative verb phrases</strong>, e.g.,<code>x.reverse()</code>, <code>x.sort()</code>, <code>x.append(y)</code>. 变异的方法应该使用命令式的动词短语。</h4><h4 id="2-2-2-Uses-of-non-mutating-methods-should-read-as-noun-phrases-when-possible-e-g-x-distanceTo-y-i-successor-非变异的方法尽可能的使用名词短语。"><a href="#2-2-2-Uses-of-non-mutating-methods-should-read-as-noun-phrases-when-possible-e-g-x-distanceTo-y-i-successor-非变异的方法尽可能的使用名词短语。" class="headerlink" title="2.2.2. Uses of non-mutating methods should read as noun phrases when possible, e.g. x.distanceTo(y), i.successor(). 非变异的方法尽可能的使用名词短语。"></a>2.2.2. Uses of <strong>non-mutating methods should read as noun phrases</strong> when possible, e.g. <code>x.distanceTo(y)</code>, <code>i.successor()</code>. 非变异的方法尽可能的使用名词短语。</h4><p>Imperative verbs are acceptable when there is no good alternative that reads as a noun phrase: 必要的使用动词也是可接受的，当没有其他好的可以读起来像一个名字短语的选项。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstAndLast <span class="operator">=</span> fullName.split() <span class="comment">// acceptable</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-3-When-a-mutating-method-is-described-by-a-verb-name-its-non-mutating-counterpart-according-to-the-“ed-x2F-ing”-rule-e-g-the-non-mutating-versions-ofx-sort-and-x-append-y-are-x-sorted-and-x-appending-y-与变异之对应的非变异自己的变异方法通常是动词加“ed-x2F-ing”"><a href="#2-2-3-When-a-mutating-method-is-described-by-a-verb-name-its-non-mutating-counterpart-according-to-the-“ed-x2F-ing”-rule-e-g-the-non-mutating-versions-ofx-sort-and-x-append-y-are-x-sorted-and-x-appending-y-与变异之对应的非变异自己的变异方法通常是动词加“ed-x2F-ing”" class="headerlink" title="2.2.3. When a mutating method is described by a verb, name its non-mutating counterpart according to the “ed&#x2F;ing” rule, e.g. the non-mutating versions ofx.sort() and x.append(y) are x.sorted() and x.appending(y). 与变异之对应的非变异自己的变异方法通常是动词加“ed&#x2F;ing”"></a>2.2.3. When <strong>a mutating method is described by a verb, name its non-mutating counterpart</strong> according to the <strong>“ed&#x2F;ing” rule</strong>, e.g. the non-mutating versions of<code>x.sort()</code> and <code>x.append(y)</code> are <code>x.sorted()</code> and <code>x.appending(y)</code>. 与变异之对应的非变异自己的变异方法通常是动词加“ed&#x2F;ing”</h4><p>Often, a mutating method will have a non-mutating variant returning the same, or a similar, type as the receiver. 通常，一个非变异自己的变异的方法返回值是一个相同或者相似类型。</p>
<p>Prefer to name the non-mutating variant using the verb’s past tense (usually appending “ed”): 偏爱用动词过去式（通常是结尾添加“ed”）命名一个非变异体</p>
  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Reverses `self` in-place. </span></span><br><span class="line"><span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">reverse</span>()  </span><br><span class="line"></span><br><span class="line"><span class="comment">/// Returns a reversed copy of `self`. </span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">reversed</span>() -&gt; <span class="keyword">Self</span></span><br><span class="line"><span class="operator">...</span> </span><br><span class="line">x.reverse() </span><br><span class="line"><span class="keyword">let</span> y <span class="operator">=</span> x.reversed()</span><br></pre></td></tr></table></figure>
<p>When adding “ed” is not grammatical because the verb has a direct object, name the non-mutating variant using the verb’s gerund form (usually appending “ing”): 当因为及物动词添加“ed”不和语法时，就使用动名词形式（通常结尾添加“ing”）来命名</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Strips all the newlines from \`self\` </span></span><br><span class="line"><span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">stripNewlines</span>()  </span><br><span class="line"></span><br><span class="line"><span class="comment">/// Returns a copy of \`self\` with all the newlines stripped. </span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">strippingNewlines</span>() -&gt; <span class="type">String</span> </span><br><span class="line"><span class="operator">...</span> </span><br><span class="line">s.stripNewlines() </span><br><span class="line"><span class="keyword">let</span> oneLine <span class="operator">=</span> t.strippingNewlines() </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-2-4-Uses-of-non-mutating-Boolean-methods-and-properties-should-read-as-assertions-about-the-receiver-e-g-x-isEmpty-line1-intersects-line2-非变异的布尔方法和属性应使用断言作为接收器。"><a href="#2-2-4-Uses-of-non-mutating-Boolean-methods-and-properties-should-read-as-assertions-about-the-receiver-e-g-x-isEmpty-line1-intersects-line2-非变异的布尔方法和属性应使用断言作为接收器。" class="headerlink" title="2.2.4.  Uses of non-mutating Boolean methods and properties should read as assertions about the receiver, e.g. x.isEmpty, line1.intersects(line2). 非变异的布尔方法和属性应使用断言作为接收器。"></a>2.2.4.  <a href="undefined">Uses</a> of non-mutating <strong>Boolean methods and properties should read as assertions about the receiver</strong>, e.g. <code>x.isEmpty</code>, <code>line1.intersects(line2)</code>. 非变异的布尔方法和属性应使用断言作为接收器。</h4><h4 id="2-2-5-Protocols-that-describe-what-something-is-should-read-as-nouns-e-g-Collection-Protocols-that-describe-a-capability-should-be-named-using-the-suffixes-able-ible-or-ing-e-g-Equatable-ProgressReporting-描述是什么的协议用名词。描述能力的用-able-ible-or-ing-等后缀。"><a href="#2-2-5-Protocols-that-describe-what-something-is-should-read-as-nouns-e-g-Collection-Protocols-that-describe-a-capability-should-be-named-using-the-suffixes-able-ible-or-ing-e-g-Equatable-ProgressReporting-描述是什么的协议用名词。描述能力的用-able-ible-or-ing-等后缀。" class="headerlink" title="2.2.5.  Protocols that describe what something is should read as nouns (e.g. Collection). Protocols that describe a capability should be named using the suffixes able,ible, or ing (e.g. Equatable, ProgressReporting). 描述是什么的协议用名词。描述能力的用 able,ible, or ing 等后缀。"></a>2.2.5.  <strong>Protocols</strong> that describe what something <strong>is</strong> should read as nouns (e.g. <code>Collection</code>). Protocols that describe a <strong>capability</strong> should be named using the suffixes <code>able</code>,<code>ible</code>, or <code>ing</code> (e.g. <code>Equatable</code>, <code>ProgressReporting</code>). 描述是什么的协议用名词。描述能力的用 <code>able</code>,<code>ible</code>, or <code>ing</code> 等后缀。</h4><h4 id="2-2-6-The-names-of-other-types-properties-variables-and-constants-should-read-as-nouns-其余类型，属性，变量和常量用名词。"><a href="#2-2-6-The-names-of-other-types-properties-variables-and-constants-should-read-as-nouns-其余类型，属性，变量和常量用名词。" class="headerlink" title="2.2.6. The names of other types, properties, variables, and constants should read as nouns. 其余类型，属性，变量和常量用名词。"></a>2.2.6. The names of other <strong>types, properties, variables, and constants should read as nouns.</strong> 其余类型，属性，变量和常量用名词。</h4><h3 id="2-3-Use-Terminology-Well-恰当地使用术语"><a href="#2-3-Use-Terminology-Well-恰当地使用术语" class="headerlink" title="2.3. Use Terminology Well 恰当地使用术语"></a>2.3. Use Terminology Well 恰当地使用术语</h3><p><strong>Term of Art</strong></p>
<p><em>noun</em> - a word or phrase that has a precise, specialized meaning within a particular field or profession. 一个单词或短语，有明确的特定的含义在某一特定领域或专业。</p>
<h4 id="2-3-1-Avoid-obscure-terms-if-a-more-common-word-conveys-meaning-just-as-well-Don’t-say-“epidermis”-if-“skin”-will-serve-your-purpose-Terms-of-art-are-an-essential-communication-tool-but-should-only-be-used-to-capture-crucial-meaning-that-would-otherwise-be-lost-避免使用生僻词。"><a href="#2-3-1-Avoid-obscure-terms-if-a-more-common-word-conveys-meaning-just-as-well-Don’t-say-“epidermis”-if-“skin”-will-serve-your-purpose-Terms-of-art-are-an-essential-communication-tool-but-should-only-be-used-to-capture-crucial-meaning-that-would-otherwise-be-lost-避免使用生僻词。" class="headerlink" title="2.3.1. Avoid obscure terms if a more common word conveys meaning just as well. Don’t say “epidermis” if “skin” will serve your purpose. Terms of art are an essential communication tool, but should only be used to capture crucial meaning that would otherwise be lost. 避免使用生僻词。"></a>2.3.1. <strong>Avoid obscure terms</strong> if a more common word conveys meaning just as well. Don’t say “epidermis” if “skin” will serve your purpose. Terms of art are an essential communication tool, but should only be used to capture crucial meaning that would otherwise be lost. 避免使用生僻词。</h4><p>The only reason to use a technical term rather than a more common word is that it precisely expresses something that would otherwise be ambiguous or unclear. Therefore, an API should use the term strictly in accordance with its accepted meaning.</p>
<ul>
<li><p><strong>Don’t surprise an expert</strong>: anyone already familiar with the term will be surprised and probably angered if we appear to have invented a new meaning for it.</p>
</li>
<li><p><strong>Don’t confuse a beginner</strong>: anyone trying to learn the term is likely to do a web search and find its traditional meaning.</p>
</li>
</ul>
<h4 id="2-3-2-Stick-to-the-established-meaning-if-you-do-use-a-term-of-art-Avoid-abbreviations-Abbreviations-especially-non-standard-ones-are-effectively-terms-of-art-because-understanding-depends-on-correctly-translating-them-into-their-non-abbreviated-forms-坚持使用明确的单词。避免缩写，除非很容易搜索到原意。"><a href="#2-3-2-Stick-to-the-established-meaning-if-you-do-use-a-term-of-art-Avoid-abbreviations-Abbreviations-especially-non-standard-ones-are-effectively-terms-of-art-because-understanding-depends-on-correctly-translating-them-into-their-non-abbreviated-forms-坚持使用明确的单词。避免缩写，除非很容易搜索到原意。" class="headerlink" title="2.3.2. Stick to the established meaning if you do use a term of art.Avoid abbreviations. Abbreviations, especially non-standard ones, are effectively terms-of-art, because understanding depends on correctly translating them into their non-abbreviated forms. 坚持使用明确的单词。避免缩写，除非很容易搜索到原意。"></a>2.3.2. <strong>Stick to the established meaning</strong> if you do use a term of art.<strong>Avoid abbreviations</strong>. Abbreviations, especially non-standard ones, are effectively terms-of-art, because understanding depends on correctly translating them into their non-abbreviated forms. 坚持使用明确的单词。避免缩写，除非很容易搜索到原意。</h4><pre><code>&gt;The intended meaning for any abbreviation you use should be easily found by a web search. 
</code></pre>
<h4 id="2-3-3-Embrace-precedent-Don’t-optimize-terms-for-the-total-beginner-at-the-expense-of-conformance-to-existing-culture-拥抱先例：不要为了新手，以顺应先前的文化为代价去优化术语。"><a href="#2-3-3-Embrace-precedent-Don’t-optimize-terms-for-the-total-beginner-at-the-expense-of-conformance-to-existing-culture-拥抱先例：不要为了新手，以顺应先前的文化为代价去优化术语。" class="headerlink" title="2.3.3. Embrace precedent: Don’t optimize terms for the total beginner at the expense of conformance to existing culture. 拥抱先例：不要为了新手，以顺应先前的文化为代价去优化术语。"></a>2.3.3. <strong>Embrace precedent:</strong> Don’t optimize terms for the total beginner at the expense of conformance to existing culture. 拥抱先例：不要为了新手，以顺应先前的文化为代价去优化术语。</h4><blockquote>
<p>译者注：#Swift3 Remove the ++ and – operators<br>Author: Chris Lattner <a target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/master/proposals/0004-remove-pre-post-inc-decrement.md">https://github.com/apple/swift-evolution/blob/master/proposals/0004-remove-pre-post-inc-decrement.md</a> </p>
</blockquote>
<h2 id="3-Conventions-约定"><a href="#3-Conventions-约定" class="headerlink" title="3. Conventions 约定"></a>3. Conventions 约定</h2><h3 id="3-1-General-Conventions-一般约定"><a href="#3-1-General-Conventions-一般约定" class="headerlink" title="3.1. General Conventions 一般约定"></a>3.1. General Conventions 一般约定</h3><ul>
<li><p><strong>Document the complexity of any computed property that is not O(1)</strong>. People often assume that property access involves no significant computation, because they have stored properties as a mental model. Be sure to alert them when that assumption may be violated. 指出任何复杂度非O(1)的计算属性。因为人们通常假设属性访问并非复杂计算量。</p>
</li>
<li><p><strong>Prefer methods and properties to free functions</strong>. Free functions are used only in special cases. 偏爱方法和属性，而非相对独立的函数。</p>
</li>
<li><p><strong>Follow case conventions:</strong> names of types, protocols and enum cases are <code>UpperCamelCase</code>. Everything else is <code>lowerCamelCase</code>. 遵循驼峰大小写法：类型，协议和枚举用大驼峰法，其余小驼峰法。</p>
</li>
<li><p><strong>Methods can share a base name when they share the same basic meaning</strong>but operate on different types, or are in different domains.  方法可以共用一个通用名，如果均指一个基本含义时，用于不同的类型或者不同的作用域。</p>
<p>For example, the following is encouraged, since the methods do essentially the same things:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Shape</span> &#123; </span><br><span class="line"><span class="comment">/// Returns true iff other is within the area of self. </span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">contains</span>(<span class="params">other</span>: <span class="type">Point</span>) -&gt; <span class="type">Bool</span> &#123; <span class="operator">...</span> &#125;  </span><br><span class="line"><span class="comment">/// Returns true iff other is entirely within the area of self. </span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">contains</span>(<span class="params">other</span>: <span class="type">Shape</span>) -&gt; <span class="type">Bool</span> &#123; <span class="operator">...</span> &#125;  </span><br><span class="line"><span class="comment">/// Returns true iff other is within the area of self. </span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">contains</span>(<span class="params">other</span>: <span class="type">LineSegment</span>) -&gt; <span class="type">Bool</span> &#123; <span class="operator">...</span> &#125; &#125;</span><br></pre></td></tr></table></figure>

<p>​</p>
</li>
</ul>
<h3 id="3-2-Parameters"><a href="#3-2-Parameters" class="headerlink" title="3.2. Parameters"></a>3.2. Parameters</h3><ul>
<li><p>3.2.1. <strong>Take advantage of defaulted arguments</strong> when it simplifies common uses. Any parameter with a single commonly-used value is a candidate for defaulting. 充分利用参数的默认值。</p>
</li>
<li><p>3.2.2. <strong>Prefer to locate parameters with defaults towards the end</strong> of the parameter list. Parameters without defaults are usually more essential to the semantics of a method, and provide a stable initial pattern of use where methods are invoked. 尽量含默认值参数置于参数列表后面。</p>
</li>
<li><p>3.2.3. <strong>Prefer to follow the language’s defaults for the presence of argument labels</strong> 遵循语言习惯填写外部参数标签。</p>
<p> In other words, usually: 换言之</p>
<ul>
<li><p>First parameters to methods and functions should not have required argument labels. 第一参数不必指明外部参数。</p>
</li>
<li><p>Other parameters to methods and functions should have required argument labels. 后面的外部参数必须填写。</p>
</li>
<li><p>All parameters to initializers should have required argument labels. 所有涉及初始化的参数均需外部参数。</p>
<pre><code>The above corresponds to where the language would require argument labels if each parameter was declared with the form: 如果符合上述需要外部参数标签，应该向下面这么声明
</code></pre>
</li>
</ul>
</li>
</ul>
<p>​	<code>swift ​	     identifier: Type ​	</code><br>​	<br>    &gt;译者注：参看 <a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/24815832/when-are-argument-labels-required-in-swift">http://stackoverflow.com/questions/24815832/when-are-argument-labels-required-in-swift</a></p>
<p>There are only a few exceptions: 也有例外</p>
<ul>
<li><p><strong>In initializers that should be seen as “full-width type conversions,”</strong> the initial argument should be the source of the conversion, and should be unlabelled.  包含全角的类型转换的初始化应该使用原始指，而且不包含外部参数标签。</p>
  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">String</span> &#123; </span><br><span class="line"><span class="comment">// Convert `x` into its textual representation in the given radix init(_ x: BigInt, radix: Int = 10) // Note the initial separate underscore </span></span><br><span class="line">&#125;  </span><br><span class="line">text <span class="operator">=</span> <span class="string">&quot;The value is: &quot;</span> </span><br><span class="line">text <span class="operator">+=</span> <span class="type">String</span>(veryLargeNumber) </span><br><span class="line">text <span class="operator">+=</span> <span class="string">&quot; and in hexadecimal, it&#x27;s&quot;</span> </span><br><span class="line">text <span class="operator">+=</span> <span class="type">String</span>(veryLargeNumber, radix: <span class="number">16</span>)</span><br><span class="line">​	```</span><br><span class="line">​</span><br><span class="line"><span class="type">In</span> “narrowing” type conversions, though, a label that describes the narrowing <span class="keyword">is</span> recommended:</span><br><span class="line"></span><br><span class="line">	```<span class="type">Swift</span></span><br><span class="line">	<span class="keyword">extension</span> <span class="title class_">UInt32</span> &#123; </span><br><span class="line">	<span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">value</span>: <span class="type">Int16</span>) <span class="comment">// widening, so no label </span></span><br><span class="line">	<span class="keyword">init</span>(<span class="params">truncating</span> <span class="params">bits</span>: <span class="type">UInt64</span>) </span><br><span class="line">	<span class="keyword">init</span>(<span class="params">saturating</span> <span class="params">value</span>: <span class="type">UInt64</span>) &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>When all parameters are peers that can’t be usefully distinguished</strong>, none should be labelled. Well-known examples include <code>min(number1, number2)</code> and<code>zip(sequence1, sequence2)</code>. 如果所有参数是平等不易区分重要性，不用加外部参数标签。</p>
</li>
<li><p><a href="undefined"><strong>When the first argument is defaulted, it should have a distinct argument label</strong></a>. 如果第一个参数是值可空，那么就应该添加一个清晰的外表参数标签。</p>
  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Document</span> &#123; </span><br><span class="line"><span class="keyword">func</span> <span class="title function_">close</span>(<span class="params">completionHandler</span> <span class="params">completion</span>: ((<span class="type">Bool</span>) -&gt; <span class="type">Void</span>)<span class="operator">?</span> <span class="operator">=</span> <span class="literal">nil</span>) </span><br><span class="line">&#125; </span><br><span class="line">doc1.close() </span><br><span class="line">doc2.close(completionHandler: app.quit) </span><br></pre></td></tr></table></figure>
<p>  As you can see, this practice makes calls read correctly regardless of whether the argument is passed explicitly. If instead you omit the parameter description, the call may incorrectly imply the argument is the direct object of the “sentence:”</p>
  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Document</span> &#123; </span><br><span class="line"><span class="keyword">func</span> <span class="title function_">close</span>(<span class="params">completion</span>: ((<span class="type">Bool</span>) -&gt; <span class="type">Void</span>)<span class="operator">?</span> <span class="operator">=</span> <span class="literal">nil</span>) </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">doc.close(app.quit) <span class="comment">// Closing the quit function?</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>  If you attach the parameter description to the function’s base name, it will “dangle” when the default is used:
  
</code></pre>
  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Document</span> &#123; </span><br><span class="line"><span class="keyword">func</span> <span class="title function_">closeWithCompletionHandler</span>(<span class="params">completion</span>: ((<span class="type">Bool</span>) -&gt; <span class="type">Void</span>)<span class="operator">?</span> <span class="operator">=</span> <span class="literal">nil</span>) </span><br><span class="line">&#125; </span><br><span class="line">doc.closeWithCompletionHandler() <span class="comment">// What completion handler?</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="4-Special-Instructions-特别说明"><a href="#4-Special-Instructions-特别说明" class="headerlink" title="4. Special Instructions 特别说明"></a>4. Special Instructions 特别说明</h2><h3 id="4-1-Take-extra-care-with-unconstrained-polymorphism-e-g-Any-AnyObject-and-unconstrained-generic-parameters-to-avoid-ambiguities-in-overload-sets-特别注意不受约束类型的多态。"><a href="#4-1-Take-extra-care-with-unconstrained-polymorphism-e-g-Any-AnyObject-and-unconstrained-generic-parameters-to-avoid-ambiguities-in-overload-sets-特别注意不受约束类型的多态。" class="headerlink" title="4.1. Take extra care with unconstrained polymorphism (e.g. Any, AnyObject, and unconstrained generic parameters) to avoid ambiguities in overload sets. 特别注意不受约束类型的多态。"></a>4.1. <strong>Take extra care with unconstrained polymorphism</strong> (e.g. <code>Any</code>, <code>AnyObject</code>, and unconstrained generic parameters) to avoid ambiguities in overload sets. 特别注意不受约束类型的多态。</h3><p>For example, consider this overload set:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Array</span> &#123; </span><br><span class="line"><span class="comment">/// Inserts `newElement` at `self.endIndex`. </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">append</span>(<span class="params">newElement</span>: <span class="type">Element</span>) </span><br><span class="line"> </span><br><span class="line"> <span class="comment">/// Inserts the contents of `newElements`, in order, at </span></span><br><span class="line"> <span class="comment">/// `self.endIndex`. </span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">append</span>&lt;</span><br><span class="line"> <span class="type">S</span> : <span class="type">SequenceType</span> where <span class="type">S</span>.<span class="type">Generator</span>.<span class="type">Element</span> == <span class="type">Element</span> </span><br><span class="line"> &gt;(<span class="params">newElements</span>: <span class="type">S</span>) &#125; </span><br></pre></td></tr></table></figure>

<p>These methods form a semantic family, and the argument types appear at first to be sharply distinct. However, when <code>Element</code> is <code>Any</code>, a single element can have the same type as a sequence of elements:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var values: [Any] = [1, &quot;a&quot;] values.append([2, 3, 4]) // [1, &quot;a&quot;, [2, 3, 4]] or [1, &quot;a&quot;, 2, 3, 4]? </span><br></pre></td></tr></table></figure>

<p>To eliminate the ambiguity, name the second overload more explicitly: 为了排除歧义，重新命名时更加明确含义。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Array</span> &#123; </span><br><span class="line"><span class="comment">/// Inserts `newElement` at `self.endIndex`. </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">append</span>(<span class="params">newElement</span>: <span class="type">Element</span>)  </span><br><span class="line"></span><br><span class="line"><span class="comment">/// Inserts the contents of `newElements`, in order, at </span></span><br><span class="line"><span class="comment">/// `self.endIndex`. </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">appendContentsOf</span>&lt; </span><br><span class="line"><span class="type">S</span> : <span class="type">SequenceType</span> where <span class="type">S</span>.<span class="type">Generator</span>.<span class="type">Element</span> == <span class="type">Element</span> </span><br><span class="line">&gt;(<span class="params">newElements</span>: <span class="type">S</span>) &#125; </span><br></pre></td></tr></table></figure>

<p>Notice how the new name better matches the documentation comment. In this case, the act of writing the documentation comment actually brought the issue to the API author’s attention.</p>
<h3 id="4-2-Make-documentation-comments-tool-friendly-they-will-be-automatically-extracted-to-generate-richly-formatted-public-documentation-and-they-appear-in-Xcode-in-generated-interfaces-quick-help-and-code-completion-文档注释对工具优化，方便地自动提取富文本的文档，自动显示在-Xcode，生成界面，快速帮助，代码补全中。"><a href="#4-2-Make-documentation-comments-tool-friendly-they-will-be-automatically-extracted-to-generate-richly-formatted-public-documentation-and-they-appear-in-Xcode-in-generated-interfaces-quick-help-and-code-completion-文档注释对工具优化，方便地自动提取富文本的文档，自动显示在-Xcode，生成界面，快速帮助，代码补全中。" class="headerlink" title="4.2. Make documentation comments tool-friendly; they will be automatically extracted to generate richly-formatted public documentation, and they appear in Xcode, in generated interfaces, quick help, and code completion. 文档注释对工具优化，方便地自动提取富文本的文档，自动显示在 Xcode，生成界面，快速帮助，代码补全中。"></a>4.2. <strong>Make documentation comments tool-friendly</strong>; they will be automatically extracted to generate richly-formatted public documentation, and they appear in Xcode, in generated interfaces, quick help, and code completion. 文档注释对工具优化，方便地自动提取富文本的文档，自动显示在 Xcode，生成界面，快速帮助，代码补全中。</h3><p>Our Markdown processor gives special treatment to the following bullet list keywords: Swift 版 Markdown 会特殊处理下面列出的关键词</p>
<table>
<thead>
<tr>
<th><code>-Attention:</code></th>
<th><code>-Important:</code></th>
<th><code>-Requires:</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>-Author:</code></td>
<td><code>-Invariant:</code></td>
<td><code>-See:</code></td>
</tr>
<tr>
<td><code>-Authors:</code></td>
<td><code>-Note:</code></td>
<td><code>-Since:</code></td>
</tr>
<tr>
<td><code>-Bug:</code></td>
<td><code>-Postcondition:</code></td>
<td><code>-Throws:</code></td>
</tr>
<tr>
<td><code>-Complexity:</code></td>
<td><code>-Precondition:</code></td>
<td><code>-TODO:</code></td>
</tr>
<tr>
<td><code>-Copyright:</code></td>
<td><code>-Remark:</code></td>
<td><code>-Version:</code></td>
</tr>
<tr>
<td><code>-Date:</code></td>
<td><code>-Remarks:</code></td>
<td><code>-Warning:</code></td>
</tr>
<tr>
<td><code>-Experiment:</code></td>
<td><code>-Returns:</code></td>
<td></td>
</tr>
</tbody></table>
<p><strong>Writing a great summary is more important</strong> than leveraging keywords. 写一个很棒的概要远比仅仅添加关键词重要的多。</p>
<p>You can omit separate documentation for each parameter and the return type if it wouldn’t add useful information beyond what’s already conveyed by the method signature and its summary line. For example: 除方法签名和概要信息外，如果不能添加有用的信息，就可以省略参数和返回类型的注释文档。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Append `newContent` to this stream. </span></span><br><span class="line"><span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">write</span>(<span class="params">newContent</span>: <span class="type">String</span>)</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/12/10/Feeyue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/12/10/Feeyue/" class="post-title-link" itemprop="url">Feeyue</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-12-10 12:08:36" itemprop="dateCreated datePublished" datetime="2015-12-10T12:08:36+08:00">2015-12-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>正如一个朋友说得：“开发这个工作讲究的就是自学能力。” 我最近开发一款 App 希望能够同时阅读 Twitter 和微博，接触到官方文档时候，就想偷懒去开源第三方 SDK，发现太多bug。还不如官方文档解释的清楚和步骤详细。<br>而且忘记了方法论，就是开发一款 App，罗列出 UI 和技术框架，但是遇到全英文的文档时候也懵了。仔细想想其实也就是 TwitterKit 封装 iOS 一些常见用法的 API，但是总的来说还是基于 oAuth 和 REST ，其中 REST 都很熟悉了，无非就是 oAuth 比较麻烦一般都是每个公司封装不一样，需要安装文档一步一步来配置就好了。</p>
<p>总结下来，遇到新的技术要注意方法：</p>
<ul>
<li>对比是否接触过类似的技术问题</li>
<li>总结提取大纲分类</li>
<li>不认识单词一定要翻译清楚</li>
<li>实践部分一步一步的做</li>
</ul>
<blockquote>
<p>吐槽一下 dev.twitter.com 的三级菜单真是很隐晦，不是一个好的设计。<br><img src="http://ww3.sinaimg.cn/large/5369602egw1eyuhfnu59nj20py0j6dl8.jpg" alt="dev.twitter.com"></p>
</blockquote>
<h2 id="Twitter-集成-TwitterKit"><a href="#Twitter-集成-TwitterKit" class="headerlink" title="Twitter 集成 TwitterKit"></a>Twitter 集成 TwitterKit</h2><p>下载 Fabric.app，添加 pod，安装提示步骤来即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod &#x27;Fabric&#x27;</span><br><span class="line">pod &#x27;TwitterKit&#x27;</span><br></pre></td></tr></table></figure>

<p>访问：<a target="_blank" rel="noopener" href="https://docs.fabric.io/ios">https://docs.fabric.io/ios</a>，使用其 Authentication 和 REST API 即可。</p>
<blockquote>
<p>The REST API can be used to make authenticated Twitter API requests. Though it can be accessed manually, we recommend using the convenience methods whenever possible.</p>
</blockquote>
<h2 id="微博集成-LeanCloudSocial"><a href="#微博集成-LeanCloudSocial" class="headerlink" title="微博集成 LeanCloudSocial"></a>微博集成 LeanCloudSocial</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pod &#x27;LeanCloudSocial&#x27;</span><br></pre></td></tr></table></figure>
<p>文档：<a target="_blank" rel="noopener" href="https://leancloud.cn/docs/sns.html">https://leancloud.cn/docs/sns.html</a></p>
<p>LeanCloudSocial是只有一键登录，属于轻量级添加微博&#x2F;微信&#x2F;QQ登录支持，没有其他微博相关 REST API 可用。后面微博部分需要手动或者可能换成微博官方 SDK。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/11/26/Swift-2-1-Methods/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/11/26/Swift-2-1-Methods/" class="post-title-link" itemprop="url">Swift 2.1 Examples - Methods</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-11-26 00:14:21" itemprop="dateCreated datePublished" datetime="2015-11-26T00:14:21+08:00">2015-11-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>The Swift Programming Language 2.1 Examples</p>
<p>源码在 GitHub：<a target="_blank" rel="noopener" href="https://github.com/gewill/The-Swift-Programming-Language-2.1-Examples">https://github.com/gewill/The-Swift-Programming-Language-2.1-Examples</a></p>
<p>Playground -&gt;</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//: Playground - noun: a place where people can play</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="comment">//: 方法（Methods）</span></span><br><span class="line"><span class="comment">//: 方法是与某些特定类型相关联的函数。类、结构体、枚举都可以定义实例方法；实例方法为给定类型的实例封装了具体的任务与功能。类、结构体、枚举也可以定义类型方法；类型方法与类型本身相关联。类型方法与 Objective-C 中的类方法（class methods）相似。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//: 实例方法 (Instance Methods)</span></span><br><span class="line"><span class="comment">//: 实例方法是属于某个特定类、结构体或者枚举类型实例的方法。实例方法提供访问和修改实例属性的方法或提供与实例目的相关的功能，并以此来支撑实例的功能。实例方法的语法与函数完全一致.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//: self 属性(The self Property)</span></span><br><span class="line"><span class="comment">//: 类型的每一个实例都有一个隐含属性叫做self，self完全等同于该实例本身。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//: 在实例方法中修改值类型(Modifying Value Types from Within Instance Methods)</span></span><br><span class="line"><span class="comment">//: 结构体和枚举是值类型。一般情况下，值类型的属性不能在它的实例方法中被修改。但是，如果你确实需要在某个特定的方法中修改结构体或者枚举的属性，你可以选择变异(mutating)这个方法，然后方法就可以从方法内部改变它的属性；并且它做的任何改变在方法结束时还会保留在原始结构中。方法还可以给它隐含的self属性赋值一个全新的实例，这个新实例在方法结束后将替换原来的实例。</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x <span class="operator">=</span> <span class="number">0.0</span>, y <span class="operator">=</span> <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">moveByX</span>(<span class="params">deltaX</span>: <span class="type">Double</span>, <span class="params">y</span> <span class="params">deltaY</span>: <span class="type">Double</span>) &#123;</span><br><span class="line">        x <span class="operator">+=</span> deltaX</span><br><span class="line">        y <span class="operator">+=</span> deltaY</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> somePoint <span class="operator">=</span> <span class="type">Point</span>(x: <span class="number">3.0</span>, y: <span class="number">3.0</span>)</span><br><span class="line">somePoint.moveByX(<span class="number">2.0</span>, y: <span class="number">3.0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//: 在可变方法中给 self 赋值(Assigning to self Within a Mutating Method)</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point1</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x <span class="operator">=</span> <span class="number">0.0</span>, y <span class="operator">=</span> <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">moveByX</span>(<span class="params">deltaX</span>: <span class="type">Double</span>, <span class="params">y</span> <span class="params">deltaY</span>: <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span> <span class="operator">=</span> <span class="type">Point1</span>(x: x <span class="operator">+</span> deltaX, y: y <span class="operator">+</span> deltaY)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//: 这里不仅仅学习一个语法，而是思考为什么费劲把默认不可变的枚举变成可变，是因为提供一个可能结合枚举特性，写出简洁表达能力强的代码。 </span></span><br><span class="line"><span class="comment">//: Ash Furrow: Ideas vs Syntax. Watch video here: https://youtu.be/YsUTuwpbURA</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">TriStateSwitch</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Off</span>, <span class="type">Low</span>, <span class="type">High</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">next</span>() &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="type">Off</span>: <span class="keyword">self</span> <span class="operator">=</span> <span class="type">Low</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">Low</span>: <span class="keyword">self</span> <span class="operator">=</span> <span class="type">High</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">High</span>: <span class="keyword">self</span> <span class="operator">=</span> <span class="type">Off</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ovenLight <span class="operator">=</span> <span class="type">TriStateSwitch</span>.<span class="type">Low</span></span><br><span class="line">ovenLight.next()</span><br><span class="line">ovenLight.next()</span><br><span class="line"><span class="comment">//: 类型方法 (Type Methods)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//: 实例方法是被类型的某个实例调用的方法。你也可以定义类型本身调用的方法，这种方法就叫做类型方法。声明结构体和枚举的类型方法，在方法的func关键字之前加上关键字static。类可能会用关键字class来允许子类重写父类的方法实现。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//: 在 Objective-C 中，你只能为 Objective-C 的类定义类型方法（type-level methods）。在 Swift 中，你可以为所有的类、结构体和枚举定义类型方法。每一个类型方法都被它所支持的类型显式包含。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">someTypeMethod</span>() &#123;</span><br><span class="line">        <span class="comment">// Do something</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;This is a type method&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">SomeClass</span>.someTypeMethod()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//: 下面的例子定义了一个名为LevelTracker结构体。它监测玩家的游戏发展情况（游戏的不同层次或阶段）</span></span><br><span class="line"><span class="comment">//: 也就是定结构体类型方法的用途，可以直接把逻辑加到定义的数据类型中</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">LevelTracker</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> highestunlockedLevel <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">unlockLevel</span>(<span class="params">level</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> level <span class="operator">&gt;</span> highestunlockedLevel &#123; highestunlockedLevel <span class="operator">=</span> level &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">levelIsUnlocked</span>(<span class="params">level</span>: <span class="type">Int</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> level <span class="operator">&lt;=</span> highestunlockedLevel</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> currentLevel <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">advanceToLevel</span>(<span class="params">level</span>: <span class="type">Int</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="type">LevelTracker</span>.levelIsUnlocked(level) &#123;</span><br><span class="line">            currentLevel <span class="operator">=</span> level</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Player</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> tracker <span class="operator">=</span> <span class="type">LevelTracker</span>()</span><br><span class="line">    <span class="keyword">let</span> playName: <span class="type">String</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">compeletedLevel</span>(<span class="params">level</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="type">LevelTracker</span>.unlockLevel(level <span class="operator">+</span> <span class="number">1</span>)</span><br><span class="line">        tracker.advanceToLevel(level <span class="operator">+</span> <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>:<span class="type">String</span>) &#123;</span><br><span class="line">        playName <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> player <span class="operator">=</span> <span class="type">Player</span>.<span class="keyword">init</span>(name: <span class="string">&quot;Will&quot;</span>)</span><br><span class="line">player.compeletedLevel(<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="type">LevelTracker</span>.highestunlockedLevel)</span><br><span class="line"></span><br><span class="line">player <span class="operator">=</span> <span class="type">Player</span>.<span class="keyword">init</span>(name: <span class="string">&quot;Ge&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> player.tracker.advanceToLevel(<span class="number">6</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Level 6 has been unlocked.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Level 6 has not yet been unlocked.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Ge Will</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  





</body>
</html>
