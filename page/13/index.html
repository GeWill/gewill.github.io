<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.17.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
<meta property="og:type" content="website">
<meta property="og:title" content="Will&#39;s Blog">
<meta property="og:url" content="http://example.com/page/13/index.html">
<meta property="og:site_name" content="Will&#39;s Blog">
<meta property="og:description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Ge Will">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/13/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/13/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Will's Blog</title>
  







<head>
    <!-- éœé¹œæ–‡æ¥·å­—ä½“ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/style.css"/>

    <!-- datapulseç»Ÿè®¡ -->
    <script defer type="text/javascript" src="https://datapulse.app/datapulse.min.js" id="datapulse" data-endpoint="https://datapulse.app/api/v1/event" data-workspace="cljxqml5q0y0f8j37d4futnbl"></script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DR0FC9YJLH"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'G-DR0FC9YJLH');
    </script>

    <!-- çœ‹æ¿å¨˜ -->
    <script src="https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>
</head>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Will's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">196</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">16</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">1</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ge Will"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Ge Will</p>
  <div class="site-description" itemprop="description">The people who are crazy enough to think they can change the world, are the ones who DO.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">196</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/gewill" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;gewill" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:531sunlight@gmail.com" title="E-Mail â†’ mailto:531sunlight@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/gewei" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;gewei" rel="noopener me" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/BoJack_D" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;BoJack_D" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/08/21/Design-Patterns-Delegation-Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/21/Design-Patterns-Delegation-Notes/" class="post-title-link" itemprop="url">Design Patterns: Delegation - Notes</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-08-21 18:50:48" itemprop="dateCreated datePublished" datetime="2015-08-21T18:50:48+08:00">2015-08-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Fromï¼š<a target="_blank" rel="noopener" href="http://code.tutsplus.com/articles/design-patterns-delegation--cms-23901">Design Patterns: Delegation</a> by Bart Jacobs</p>
<h2 id="1-What-Is-Delegation"><a href="#1-What-Is-Delegation" class="headerlink" title="1. What Is Delegation?"></a>1. What Is Delegation?</h2><p>The definition of the delegation pattern is short and simple. This is how Apple defines the pattern.</p>
<blockquote>
<p>A delegate is an object that acts on behalf of, or in coordination with, another object when that object encounters an event in a program.</p>
</blockquote>
<h2 id="2-Example"><a href="#2-Example" class="headerlink" title="2. Example"></a>2. Example</h2><h3 id="The-UITableViewDelegate-protocol"><a href="#The-UITableViewDelegate-protocol" class="headerlink" title="The UITableViewDelegate protocol"></a>The UITableViewDelegate protocol</h3><p>An important difference between Swift and Objective-C is the possibility to mark protocol methods as optional. In Objective-C, the methods of a protocol are required by default. The methods of the UITableViewDelegate protocol, however, are optional. In other words, it is possible for a class to conform to the UITableViewDelegate protocol without implementing any of the protocolâ€™s methods.</p>
<p>In Swift, however, a class conforming to a particular protocol is required to implement every method defined by the protocol. This is much safer since the delegating object doesnâ€™t need to verify whether the delegate implements a protocol method. This subtle, but important, difference is illustrated later in this tutorial when we implement the delegation pattern.</p>
<h3 id="Data-Source"><a href="#Data-Source" class="headerlink" title="Data Source"></a>Data Source</h3><p>The data source pattern fits nicely in the Model-View-Controller or MVC pattern. Why is that? A table view, for example, is part of the view layer. It doesnâ€™t and shouldnâ€™t know about the model layer and isnâ€™t in charge of handling the data that is coming from the model layer. This implies that the data source of a table view, or any other view component that implements the data source pattern, is often a controller of some sort. On iOS, itâ€™s usually a UIViewController subclass.</p>
<h2 id="3-Implementation"><a href="#3-Implementation" class="headerlink" title="3. Implementation"></a>3. Implementation</h2><h3 id="Objective-C"><a href="#Objective-C" class="headerlink" title="Objective-C"></a>Objective-C</h3><p><a target="_blank" rel="noopener" href="https://github.com/gewill/test-projects/tree/master/test%20Delegation%20Objective-C">Project on GitHub</a></p>
<p><strong>recipient:</strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AddItemViewController.h</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">AddItemViewControllerDelegate</span>;</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AddItemViewController</span> : <span class="title">UIViewController</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">weak</span>, <span class="keyword">nonatomic</span>) <span class="type">id</span>&lt;AddItemViewControllerDelegate&gt; delegate;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">AddItemViewControllerDelegate</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line">- (<span class="type">void</span>)viewControllerDidCancel:(AddItemViewController *)viewController;</span><br><span class="line">- (<span class="type">void</span>)viewController:(AddItemViewController *)viewController didAddItem:(<span class="built_in">NSString</span> *)item;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line">- (<span class="type">BOOL</span>)viewController:(AddItemViewController *)viewController validateItem:(<span class="built_in">NSString</span> *)item;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>We declare a class, AddItemViewController, which extends UIViewController. The class declares a property, delegate, of type id<AddItemViewControllerDelegate>. Note that the property is marked as weak, which means that an AddItemViewController instance keeps a weak reference to its delegate.</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AddItemViewController.m</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">IBAction</span>)cancel:(<span class="type">id</span>)sender &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.delegate &amp;&amp; [<span class="keyword">self</span>.delegate respondsToSelector:<span class="keyword">@selector</span>(viewControllerDidCancel:)]) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.delegate viewControllerDidCancel:<span class="keyword">self</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>Sender:</strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ViewController.m</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="string">&quot;ViewController.h&quot;</span></span></span><br><span class="line"><span class="meta">#import <span class="string">&quot;AddItemViewController.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> () &lt;<span class="title">AddItemViewControllerDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="variable language_">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)didReceiveMemoryWarning &#123;</span><br><span class="line">    [<span class="variable language_">super</span> didReceiveMemoryWarning];</span><br><span class="line">    <span class="comment">// Dispose of any resources that can be recreated.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">IBAction</span>)addItem:(<span class="type">id</span>)sender &#123;</span><br><span class="line">    <span class="comment">// Initialize View Controller</span></span><br><span class="line">    AddItemViewController *viewController = [[AddItemViewController alloc] init];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Configure View Controller</span></span><br><span class="line">    [viewController setDelegate:<span class="keyword">self</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Present View Controller</span></span><br><span class="line">    [<span class="keyword">self</span> presentViewController:viewController animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)viewControllerDidCancel:(AddItemViewController *)viewController &#123;</span><br><span class="line">    <span class="comment">// Dismiss Add Item View Controller</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<h3 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h3><p><a target="_blank" rel="noopener" href="https://github.com/gewill/test-projects/tree/master/test%20Delegation%20Swift">Project on GitHub</a></p>
<p>In Swift, the delegation pattern is just as easy to implement and youâ€™ll find that Swift makes delegation slightly more elegant. Letâ€™s implement the above example in Swift. This is what the AddItemViewController class looks like in Swift.</p>
<p><strong>recipient:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AddItemViewController.swift</span></span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"> </span><br><span class="line"><span class="keyword">protocol</span> <span class="title class_">AddItemViewControllerDelegate</span>: <span class="title class_">NSObjectProtocol</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">viewControllerDidCancel</span>(<span class="params">viewController</span>: <span class="type">AddItemViewController</span>)</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">viewController</span>(<span class="params">viewController</span>: <span class="type">AddItemViewController</span>, <span class="params">didAddItem</span>: <span class="type">String</span>)</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">viewController</span>(<span class="params">viewController</span>: <span class="type">AddItemViewController</span>, <span class="params">validateItem</span>: <span class="type">String</span>) -&gt; <span class="type">Bool</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddItemViewController</span>: <span class="title class_">UIViewController</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> delegate: <span class="type">AddItemViewControllerDelegate</span>?</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">cancel</span>(<span class="params">sender</span>: <span class="type">AnyObject</span>) &#123;</span><br><span class="line">        delegate<span class="operator">?</span>.viewControllerDidCancel(<span class="keyword">self</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The protocol declaration looks a bit different in Swift. Note that the AddItemViewControllerDelegate protocol extends the NSObjectProtocol instead of the NSObject protocol. In Swift, classes and protocols cannot have the same name, which is why the NSObject protocol is named differently in Swift.</p>
<hr>
<p>Letâ€™s now look at the ViewController class, which implements the AddItemViewControllerDelegate protocol. The interface shows us that the ViewController class extends the UIViewController class and adopts the AddItemViewControllerDelegate protocol.</p>
<p><strong>Sender:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ViewController.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_">UIViewController</span>, <span class="title class_">AddItemViewControllerDelegate</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">addItem</span>(<span class="params">send</span>: <span class="type">AnyObject</span>) &#123;</span><br><span class="line">        <span class="comment">// Initialize View Controller</span></span><br><span class="line">        <span class="keyword">let</span> viewController <span class="operator">=</span> <span class="type">AddItemViewController</span>()</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// Configure View Controller</span></span><br><span class="line">        viewController.delegate <span class="operator">=</span> <span class="keyword">self</span></span><br><span class="line">         </span><br><span class="line">        <span class="comment">// Present View Controller</span></span><br><span class="line">        presentViewController(viewController, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">viewControllerDidCancel</span>(<span class="params">viewController</span>: <span class="type">AddItemViewController</span>) &#123;</span><br><span class="line">        <span class="comment">// Dismiss Add Item View Controller</span></span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">viewController</span>(<span class="params">viewController</span>: <span class="type">AddItemViewController</span>, <span class="params">didAddItem</span>: <span class="type">String</span>) &#123;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">viewController</span>(<span class="params">viewController</span>: <span class="type">AddItemViewController</span>, <span class="params">validateItem</span>: <span class="type">String</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-Conclusion"><a href="#4-Conclusion" class="headerlink" title="4. Conclusion"></a>4. Conclusion</h2><p>Delegation is a pattern youâ€™ll come across frequently when developing iOS and OS X applications. Cocoa relies heavily on this design pattern so itâ€™s important to become familiar with it.</p>
<p>Since the introduction of blocks, a few years ago, Apple has slowly offered an alternative blocks-based API to some delegation implementations. Some developers have followed Appleâ€™s lead by offering their own blocks-based alternatives. The popular AFNetworking library, for example, relies heavily on blocks instead of delegation, resulting in an elegant, intuitive API.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/08/20/Memory-Management-Attribute-of-Properties-in-Objective-C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/20/Memory-Management-Attribute-of-Properties-in-Objective-C/" class="post-title-link" itemprop="url">Objective-C å±æ€§çš„å†…å­˜ç®¡ç†ç‰¹æ€§</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-08-20 22:16:21" itemprop="dateCreated datePublished" datetime="2015-08-20T22:16:21+08:00">2015-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>å½“å¯¹è±¡æ²¡æœ‰æ‹¥æœ‰è€…æ—¶ï¼ŒæŒ‡é’ˆå˜é‡çš„å†…å­˜å°±è¯¥è¢«é‡Šæ”¾ã€‚æ•… ARC å°±æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆæ—¶å€™é‡Šæ”¾å†…å­˜çš„é—®é¢˜ã€‚å¯¹åº”çš„å°±æ˜¯å¼•ç”¨è®¡æ•°ä¸ºé›¶æ—¶ã€‚</p>
<h3 id="ARCï¼š"><a href="#ARCï¼š" class="headerlink" title="ARCï¼š"></a>ARCï¼š</h3><ul>
<li>strongï¼šæŒ‡é’ˆå˜é‡æŒ‡å‘å¯¹è±¡åï¼Œç›¸åº”çš„å¯¹è±¡å¤šä¸€ä¸ªæ‹¥æœ‰è€…ï¼Œå¼•ç”¨è®¡æ•°åŠ ä¸€ã€‚é»˜è®¤å€¼ï¼Œä½†é€šå¸¸ä¼šå†™å‡ºæ¥ã€‚</li>
<li>weak ï¼šæŒ‡é’ˆå˜é‡æŒ‡å‘å¯¹è±¡åï¼Œç›¸åº”çš„å¯¹è±¡æ‹¥æœ‰è€…ä¸ªæ•°ä¸å˜ï¼Œå¼•ç”¨è®¡æ•°ä¸å˜ã€‚ç›¸å¯¹ strongï¼Œé¿å…å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚</li>
<li>copy	ï¼šå±æ€§æŒ‡å‘çš„å¯¹è±¡æœ‰å¯èƒ½ä¿®æ”¹çš„å­ç±»ï¼Œ å¦‚ NSMutableString&#x2F;NSMutbaleArrayï¼Œè¿™æ—¶ä½¿ç”¨ copyï¼Œå¼•ç”¨è®¡æ•°ä¸ºä¸€ã€‚</li>
<li>unsafe_unretainedï¼šä¸ weak ç±»ä¼¼ï¼Œä½†ä¸ä¼šæŒ‡é’ˆè‡ªåŠ¨è®¾ç½®ä¸º nilï¼Œé€‚åˆéå¯¹è±¡å±æ€§ï¼Œä¸éœ€è¦åšå†…å­˜ç®¡ç†ï¼Œå¦‚ intï¼Œä¹Ÿæ˜¯å…¶é»˜è®¤å€¼å¯ä¸å†™ã€‚</li>
</ul>
<p><strong>ARC å››ä¸ªç‰¹æ€§çš„å…¸å‹ç”¨æ³•ï¼š</strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  GWItem.h</span></span><br><span class="line"><span class="comment">//  RandomItems</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Will Ge on 7/23/15.</span></span><br><span class="line"><span class="comment">//  Copyright Â© 2015 gewill.org. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">GWItem</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *itemName;</span><br><span class="line">    <span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *serialNumber;</span><br><span class="line">    <span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="type">int</span> valueInDollars;</span><br><span class="line">    <span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>) <span class="built_in">NSDate</span> *dateCreated;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) GWItem *containedItem;</span><br><span class="line">    <span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>) GWItem *container;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+ (<span class="keyword">instancetype</span>)randomItem;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GWItem ç±»çš„æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithItemName:(<span class="built_in">NSString</span> *)name</span><br><span class="line">                  valueInDollars:(<span class="type">int</span>)value</span><br><span class="line">                    serialNumber:(<span class="built_in">NSString</span> *)sNumber;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithItemName:(<span class="built_in">NSString</span> *)name;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="é-ARCï¼š"><a href="#é-ARCï¼š" class="headerlink" title="é ARCï¼š"></a>é ARCï¼š</h3><ul>
<li>assignï¼šä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¦‚ intï¼Œfloatï¼Œä¸ unsafe_unretained ç±»ä¼¼</li>
<li>retainï¼šé ARC ç‰ˆæœ¬ strong</li>
</ul>
<h3 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h3><ul>
<li><a target="_blank" rel="noopener" href="http://ios-blog.co.uk/tutorials/objective-c-property-attribute-reference-guide/">Objective-C: Property Attribute Reference Guide</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/08/20/GeekBand-iOS-APP-Development-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/20/GeekBand-iOS-APP-Development-5/" class="post-title-link" itemprop="url">æå®¢ç­ iOS åº”ç”¨å¼€å‘å®æˆ˜ï¼ˆäº”ï¼‰</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-08-20 16:11:23" itemprop="dateCreated datePublished" datetime="2015-08-20T16:11:23+08:00">2015-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>å­¦ä»¥è‡´ç”¨ï¼Œä¸å¦‚è¯´ï¼š<strong>ç”¨åˆ°å†å­¦</strong>ã€‚è¿™æ ·å¯ä»¥ä¿è¯èƒ½ç”¨åˆ°ã€‚è®°å¾— <a target="_blank" rel="noopener" href="http://www.gotealeaf.com/books/http">Introduction to HTTP</a> ä»¥å‰å°±çœ‹å¤šï¼Œä½†æ˜¯æ²¡æœ‰è®¤çœŸçš„åˆ†æï¼Œåªæ˜¯è¾¾åˆ°äº†äº†è§£çš„åœ°æ­¥ã€‚ç°åœ¨ iOS å¼€å‘ï¼Œä¹Ÿå°±è®¤çœŸä»”ç»†ï¼Œå°¤å…¶æ˜¯èƒ½ç”¨åˆ°çš„éƒ¨åˆ†ã€‚</p>
<p>è€å¸ˆè®²çš„æ¯”è¾ƒå¿«ï¼ŒçœŸçš„æ¯ä¸ªå…³é”®è¯éƒ½æŸ¥æ–‡æ¡£ï¼Œæ‰ä¼šå®Œæˆæ˜ç™½æ¯ä¸€æ­¥ä»€ä¹ˆæ„æ€ã€‚é¡ºä¾¿åŠ äº†æ³¨é‡Šï¼ˆæ²¡å¿ä½å†æ¬¡åæ§½äº†æ®µè€å¸ˆçš„ä»£ç æ²¡æ³¨é‡ŠğŸ˜…ï¼‰ã€‚</p>
<p>Option é”®å¿«è¢«æˆ‘æŒ‰åäº†ï¼Œä»Šå¤©æ‰å‘ç°ä¸‰åªè½»æ‹ä¹Ÿå¯ä»¥ Quick Helpã€‚</p>
<p>æç‚¼å¸¸ç”¨ç±»ï¼Œå¯ä»¥æ‹†åˆ†ä»£ç ï¼Œæ–¹ä¾¿å¤ç”¨ï¼Œé€»è¾‘æ¸…æ™°ã€‚</p>
<p>å¯ä»¥æŒ‰ç…§ MVC æˆ–è€…å…¶ä»–æ–¹å¼æ•´ç†é¡¹ç›®æ–‡ä»¶ã€‚</p>
<h2 id="24-ç½‘ç»œç¼–ç¨‹"><a href="#24-ç½‘ç»œç¼–ç¨‹" class="headerlink" title="24. ç½‘ç»œç¼–ç¨‹"></a>24. ç½‘ç»œç¼–ç¨‹</h2><p><a target="_blank" rel="noopener" href="https://github.com/gewill/GeekBand-iOS-Demo/tree/master/iOS%20APP%20Development/BLDemo05%20L21">é¡¹ç›®æºç </a></p>
<h3 id="ä¸»è¦å†…å®¹"><a href="#ä¸»è¦å†…å®¹" class="headerlink" title="ä¸»è¦å†…å®¹"></a>ä¸»è¦å†…å®¹</h3><ul>
<li>Web service åº”ç”¨å¼€å‘æµç¨‹ï¼šç½‘ç»œæ•°æ®çš„è·å–&gt;è§£æ&gt;ç”Ÿæˆ&gt;ä¸Šä¼ </li>
<li>Http ç½‘ç»œé€šä¿¡ï¼š NSURLConnection&#x2F;NSURLConnectionDataDelegate (Get&#x2F;Post)</li>
<li>XML æ•°æ®è§£æï¼š NSXMLParser&#x2F;NSXMLParserDelegate</li>
<li>JSON æ•°æ®è§£æï¼šNSJSONSerialization</li>
<li>ä¸Šä¼ &amp;ä¸‹è½½ï¼šå‚è€ƒ Http ç½‘ç»œé€šä¿¡</li>
</ul>
<p>å®‰è£…é…ç½® XAMPP</p>
<p>ä»¥å¾®åš APIï¼š<a target="_blank" rel="noopener" href="http://open.weibo.com/wiki/2/users/show">users&#x2F;show</a> è¯´æ˜ Http é€šä¿¡è¿‡ç¨‹ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹è¿˜ç®—æ¸…æ™°ä¸»è¦æ˜¯ä¸‹è½½å’Œç™»é™†ç±»æ·»åŠ ä»£ç†ï¼Œæ–¹ä¾¿ä¸å¯¹åº”çš„æ§åˆ¶å™¨é€šä¿¡ã€‚</p>
<p>æœåŠ¡å™¨æ¯”è¾ƒç®€é™‹ï¼Œæ— æ³• POST ä»€ä¹ˆä¿¡æ¯ï¼Œéƒ½èƒ½ä» <a target="_blank" rel="noopener" href="http://localhost/login.xml">http://localhost/login.xml</a> è¿”å› user ä¿¡æ¯ã€‚</p>
<h3 id="è§£æ-JSON"><a href="#è§£æ-JSON" class="headerlink" title="è§£æ JSON"></a>è§£æ JSON</h3><p>çœ‹ CS193P æ›´ä¼˜é›…çš„æ–¹æ¡ˆï¼Œå°±æ˜¯ NSJSONSerializationï¼šè½¬åŒ–ä¸ºå­—å…¸æˆ–æ•°ç»„ï¼Œé¡ºåºå¦‚ä¸‹é¢ä»£ç æ‰€ç¤ºï¼Œæœ€åä½¿ç”¨ valueForKeyPath: è®¿é—®æ•°ç»„å³å¯ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:<span class="string">@&quot;http://ax.itunes.apple.com/WebObjects/MZStoreServices.woa/ws/RSS/topfreeapplications/limit=10/json&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSData</span> *jsonRequests = [<span class="built_in">NSData</span> dataWithContentsOfURL:url];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSDictionary</span> *appListRequests = [<span class="built_in">NSJSONSerialization</span> JSONObjectWithData:jsonRequests options:<span class="number">0</span> error:<span class="literal">NULL</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSArray</span> *appEntry = [appListRequests valueForKeyPath:<span class="string">@&quot;feed.entry&quot;</span>];</span><br></pre></td></tr></table></figure>

<h3 id="POST-ç½‘ç»œè¯·æ±‚çš„è¿‡ç¨‹"><a href="#POST-ç½‘ç»œè¯·æ±‚çš„è¿‡ç¨‹" class="headerlink" title="POST ç½‘ç»œè¯·æ±‚çš„è¿‡ç¨‹"></a>POST ç½‘ç»œè¯·æ±‚çš„è¿‡ç¨‹</h3><p>GWLoginRequest.m æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  GWLoginRequest.m</span></span><br><span class="line"><span class="comment">//  BLDemo05 L21</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Will Ge on 8/21/15.</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2015 gewill.org. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="string">&quot;GWLoginRequest.h&quot;</span></span></span><br><span class="line"><span class="meta">#import <span class="string">&quot;GWMutipartForm.h&quot;</span></span></span><br><span class="line"><span class="meta">#import <span class="string">&quot;GWLoginRequestsParsers.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">GWLoginRequest</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  å‘é€ç™»é™†ç”¨æˆ·åå¯†ç è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param userName ç”¨æˆ·å</span></span><br><span class="line"><span class="comment"> *  @param password å¯†ç </span></span><br><span class="line"><span class="comment"> *  @param delegate ç™»é™†è¯·æ±‚çš„ä»£ç†æ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="type">void</span>)sendLoginRequestWithUserName:(<span class="built_in">NSString</span> *)userName</span><br><span class="line">                            password:(<span class="built_in">NSString</span> *)password</span><br><span class="line">                            delegate:(<span class="type">id</span>&lt;GWLoginRequestDelegate&gt;)delegate &#123;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span>.URLConnection cancel];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">self</span>.delegate = delegate;</span><br><span class="line">    <span class="built_in">NSString</span> *URLString = <span class="string">@&quot;http://localhost/login.xml&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// POST</span></span><br><span class="line">    <span class="comment">// è½¬åŒ–ä¸ºåˆæ³•çš„ URL æ ¼å¼</span></span><br><span class="line">    <span class="built_in">NSString</span> *encodeURLString = [URLString stringByAddingPercentEscapesUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">    <span class="built_in">NSURL</span> *URL = [<span class="built_in">NSURL</span> URLWithString:encodeURLString];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è½¬åŒ–ä¸º NSMutableURLRequest ï¼Œæ–¹ä¾¿è°ƒç”¨å­˜å–æ–¹æ³•æ›´æ”¹å±æ€§</span></span><br><span class="line">    <span class="built_in">NSMutableURLRequest</span> *request = [<span class="built_in">NSMutableURLRequest</span> requestWithURL:URL];</span><br><span class="line">    request.HTTPMethod = <span class="string">@&quot;POST&quot;</span>;</span><br><span class="line">    request.timeoutInterval = <span class="number">60</span>;</span><br><span class="line">    request.cachePolicy = <span class="built_in">NSURLRequestReloadIgnoringCacheData</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å‘é€çš„æ•°æ®è½¬æ¢ä¸ºè¡¨å•</span></span><br><span class="line">    GWMutipartForm *form = [[GWMutipartForm alloc] init];</span><br><span class="line">    [form addValue:userName forField:<span class="string">@&quot;username&quot;</span>];</span><br><span class="line">    [form addValue:password forField:<span class="string">@&quot;password&quot;</span>];</span><br><span class="line">    </span><br><span class="line">    request.HTTPBody = [form httpBody];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ›´æ–° URLConnection</span></span><br><span class="line">    <span class="keyword">self</span>.URLConnection = [[<span class="built_in">NSURLConnection</span> alloc] initWithRequest:request</span><br><span class="line">                                                         delegate:<span class="keyword">self</span> startImmediately:<span class="literal">YES</span>];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  å–æ¶ˆç™»é™†è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="type">void</span>)cancelRequest &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.URLConnection) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å–æ¶ˆå¼‚æ­¥è¯·æ±‚ï¼Œå¹¶ç½®ç©º</span></span><br><span class="line">        [<span class="keyword">self</span>.URLConnection cancel];</span><br><span class="line">        <span class="keyword">self</span>.URLConnection = <span class="literal">nil</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - NSURLConnectionDataDelegate methods</span></span><br><span class="line"><span class="comment">// ä½œä¸º NSURLConnection è¡¥å……ï¼Œæ¥å¤„ç†ç½‘ç»œè¯·æ±‚çš„è¿‡ç¨‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// URL å“åº”è¯·æ±‚çŠ¶æ€</span></span><br><span class="line">- (<span class="type">void</span>)connection:(<span class="built_in">NSURLConnection</span> *)connection didReceiveResponse:(<span class="built_in">NSURLResponse</span> *)response &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è½¬åŒ–ä¸º NSHTTPURLResponse ï¼Œæ¥è®¿é—® HTTP çŠ¶æ€ç </span></span><br><span class="line">    <span class="built_in">NSHTTPURLResponse</span> *httpResponse = (<span class="built_in">NSHTTPURLResponse</span> *)response;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ ¹æ®çŠ¶æ€ç åˆ†æƒ…å†µå¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span> (httpResponse.statusCode == <span class="number">200</span>) &#123; <span class="comment">//è¿æ¥æˆåŠŸ</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">self</span>.receviedData = [<span class="built_in">NSMutableData</span> data]; <span class="comment">// è®¾ç½®ä¸ºä¸€ä¸ªç©ºçš„ NSData</span></span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è¿æ¥å¤±è´¥ï¼Œå¾…å¤„ç†</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥å—æ•°æ®å¢é‡</span></span><br><span class="line">- (<span class="type">void</span>)connection:(<span class="built_in">NSURLConnection</span> *)connection didReceiveData:(<span class="built_in">NSData</span> *)data &#123;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span>.receviedData appendData:data];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®Œæˆè¿æ¥æˆ–åŠ è½½</span></span><br><span class="line">- (<span class="type">void</span>)connectionDidFinishLoading:(<span class="built_in">NSURLConnection</span> *)connection &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ•´ç†æ”¶åˆ°çš„æ•°æ®ï¼Œå¹¶è§£æ</span></span><br><span class="line">    <span class="built_in">NSString</span> *string = [[<span class="built_in">NSString</span> alloc ] initWithData:<span class="keyword">self</span>.receviedData</span><br><span class="line">                                              encoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, string);</span><br><span class="line">    </span><br><span class="line">    GWLoginRequestsParsers *parser = [[GWLoginRequestsParsers alloc] init];</span><br><span class="line">    GWUser *user = [parser parseXML:<span class="keyword">self</span>.receviedData];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ¥æ”¶è€…æ˜¯éå®ç°ä»£ç†æ–¹æ³•ï¼Œå¹¶å“åº”ä»£ç†æ–¹æ³•ï¼š</span></span><br><span class="line">    <span class="keyword">if</span> ([_delegate respondsToSelector:<span class="keyword">@selector</span>(requestSuccess:user:)]) &#123;</span><br><span class="line">        </span><br><span class="line">        [_delegate requestSuccess:<span class="keyword">self</span> user:user];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿æ¥å¤±è´¥</span></span><br><span class="line">- (<span class="type">void</span>)connection:(<span class="built_in">NSURLConnection</span> *)connection didFailWithError:(<span class="built_in">NSError</span> *)error &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, error);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ¥æ”¶è€…æ˜¯éå®ç°ä»£ç†æ–¹æ³•ï¼Œå¹¶å“åº”ä»£ç†æ–¹æ³•ï¼š</span></span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span>.delegate respondsToSelector:<span class="keyword">@selector</span>(requestFailed:error:)]) &#123;</span><br><span class="line">        </span><br><span class="line">        [<span class="keyword">self</span>.delegate requestFailed:<span class="keyword">self</span> error:error];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å»¶ä¼¸é˜…è¯»ï¼š"><a href="#å»¶ä¼¸é˜…è¯»ï¼š" class="headerlink" title="å»¶ä¼¸é˜…è¯»ï¼š"></a>å»¶ä¼¸é˜…è¯»ï¼š</h3><ul>
<li><p><a target="_blank" rel="noopener" href="http://www.gotealeaf.com/books/http">Introduction to HTTP</a> by Tealeaf Academy</p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.w3schools.com/tags/ref_httpmethods.asp">HTTP Methods: GET vs. POST</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/hyddd/archive/2009/03/31/1426026.html">æµ…è°ˆHTTPä¸­Getä¸Postçš„åŒºåˆ«</a></p>
<blockquote>
<p>Httpå®šä¹‰äº†ä¸æœåŠ¡å™¨äº¤äº’çš„ä¸åŒæ–¹æ³•ï¼Œæœ€åŸºæœ¬çš„æ–¹æ³•æœ‰4ç§ï¼Œåˆ†åˆ«æ˜¯GETï¼ŒPOSTï¼ŒPUTï¼ŒDELETEã€‚URLå…¨ç§°æ˜¯èµ„æºæè¿°ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è®¤ä¸ºï¼šä¸€ä¸ªURLåœ°å€ï¼Œå®ƒç”¨äºæè¿°ä¸€ä¸ªç½‘ç»œä¸Šçš„èµ„æºï¼Œè€ŒHTTPä¸­çš„GETï¼ŒPOSTï¼ŒPUTï¼ŒDELETEå°±å¯¹åº”ç€å¯¹è¿™ä¸ªèµ„æºçš„æŸ¥ï¼Œæ”¹ï¼Œå¢ï¼Œåˆ 4ä¸ªæ“ä½œã€‚åˆ°è¿™é‡Œï¼Œå¤§å®¶åº”è¯¥æœ‰ä¸ªå¤§æ¦‚çš„äº†è§£äº†ï¼ŒGETä¸€èˆ¬ç”¨äºè·å–&#x2F;æŸ¥è¯¢èµ„æºä¿¡æ¯ï¼Œè€ŒPOSTä¸€èˆ¬ç”¨äºæ›´æ–°èµ„æºä¿¡æ¯ã€‚</p>
</blockquote>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.wikiwand.com/en/List_of_HTTP_status_codes">HTTP status codes</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://json.org/">JSON</a></p>
<blockquote>
<p>JSON (JavaScript Object Notation) is a lightweight data-interchange format. It is easy for humans to read and write. It is easy for machines to parse and generate. </p>
</blockquote>
</li>
<li><p><a target="_blank" rel="noopener" href="http://code.tutsplus.com/articles/design-patterns-delegation--cms-23901">Design Patterns: Delegation</a> by Bart Jacobs</p>
<blockquote>
<p><code>@property (weak, nonatomic) id&lt;AddItemViewControllerDelegate&gt; delegate;</code><br>We declare a class, AddItemViewController, which extends UIViewController. The class declares a property, delegate, of type id<AddItemViewControllerDelegate>. Note that the property is marked as weak, which means that an AddItemViewController instance keeps a weak reference to its delegate.</p>
</blockquote>
</li>
<li><p><a target="_blank" rel="noopener" href="http://nshipster.com/nil/">nil &#x2F; Nil &#x2F; NULL &#x2F; NSNull</a> by Mattt Thompson</p>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸¾ä¸ªä¾‹å­ï¼Œè¿™ä¸ªè¡¨è¾¾...</span></span><br><span class="line"><span class="keyword">if</span> (name != <span class="literal">nil</span> &amp;&amp; [name isEqualToString:<span class="string">@&quot;Steve&quot;</span>]) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// â€¦å¯ä»¥è¢«ç®€åŒ–ä¸ºï¼š</span></span><br><span class="line"><span class="keyword">if</span> ([name isEqualToString:<span class="string">@&quot;steve&quot;</span>]) &#123; ... &#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody><tr>
<td>NULL</td>
<td>(void *)0</td>
<td>literal null value for C pointers</td>
</tr>
<tr>
<td>nil</td>
<td>(id)0</td>
<td>literal null value for Objective-C objects</td>
</tr>
<tr>
<td>Nil</td>
<td>(Class)0</td>
<td>literal null value for Objective-C classes</td>
</tr>
<tr>
<td>NSNull</td>
<td>[NSNull null]</td>
<td>singleton object used to represent null</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/08/19/iOS-Study-Methods/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/19/iOS-Study-Methods/" class="post-title-link" itemprop="url">iOS å­¦ä¹ æ–¹æ³•</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-08-19 13:15:06" itemprop="dateCreated datePublished" datetime="2015-08-19T13:15:06+08:00">2015-08-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li>å…³æ‰å„ç§èŠå¤©é€šè®¯çš„é€šçŸ¥ï¼Œå®‰é™çš„åœºæ‰€ï¼Œé›†ä¸­ç²¾ç¥å­¦ä¹ ã€‚</li>
<li>çœ‹è§†é¢‘æ•™ç¨‹ï¼šç®€å•å¿«é€Ÿï¼ŒæŒ‰ç…§è¿›åº¦è¡¨ï¼Œç³»ç»Ÿçš„å­¦ä¹ ï¼Œè´ªå¤šåš¼ä¸çƒ‚ã€‚</li>
<li>å»¶ä¼¸é˜…è¯»ï¼šåŠ æ·±ç†è§£æ¦‚å¿µï¼Œä¸è¦å¤ªå¤šï¼Œçœ‹çœ‹å®˜æ–¹æ–‡æ¡£å’Œä¸€ä¸¤ç¯‡åšå®¢</li>
<li>åšå°ç»ƒä¹ ï¼šåˆ åˆ æ”¹æ”¹ï¼ŒçœŸæ­£ä¼šç”¨</li>
<li>åº”ç”¨åˆ°é¡¹ç›®ä¸­ï¼šæˆ–å¤§æˆ–å°ï¼Œè¿™æ‰æ˜¯å­¦ä¹ çš„ç›®çš„ï¼Œèƒ½ç”¨æ¥åšå¼€å‘</li>
<li>éµå¾ªé—å¿˜æ›²çº¿å¤ä¹ ï¼šèŠ±ä¸äº†å¤šé•¿æ—¶é—´</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/08/19/GeekBand-iOS-Design-Patterns-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/19/GeekBand-iOS-Design-Patterns-2/" class="post-title-link" itemprop="url">æå®¢ç­ iOS è®¾è®¡æ¨¡å¼ï¼ˆäºŒï¼‰</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-08-19 11:30:24" itemprop="dateCreated datePublished" datetime="2015-08-19T11:30:24+08:00">2015-08-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>é‡ç‚¹åœ¨é€šçŸ¥æ¨¡å¼æµç¨‹å›¾ï¼Œå¤§è‡´äº†è§£å‡ ç§é€šçŸ¥æ¨¡å¼çš„ç”¨é€”çš„åŒºåˆ«ã€‚éƒ½æ˜¯ç†è®ºçš„ä¸œè¥¿ï¼Œè¿˜æ˜¯å¸Œæœ›å®é™…å†™ä»£ç æ—¶è”ç³»ç†è®ºï¼Œä»”ç»†è€ƒè™‘é€‰æ‹©ã€‚</p>
<p>è¯¾ä»¶ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://github.com/gewill/GeekBand-iOS-Demo/tree/master/Design%20Patterns">https://github.com/gewill/GeekBand-iOS-Demo/tree/master/Design%20Patterns</a></p>
<h2 id="6-å§”æ‰˜æ¨¡å¼"><a href="#6-å§”æ‰˜æ¨¡å¼" class="headerlink" title="6. å§”æ‰˜æ¨¡å¼"></a>6. å§”æ‰˜æ¨¡å¼</h2><ul>
<li>å¤æ‚çš„æ¨¡å‹,scrollView,tableView,collectionView</li>
<li>å•â¼€ä¸€ä¸ªç±»æ— æ³•è¡¨ç°å¤æ‚çš„è®¾è®¡</li>
<li>è®¾è®¡æ‹†åˆ†</li>
<li>æ–¹ä¾¿é‡â½¤</li>
<li>delegate ç‹¬ç«‹å¯¹è±¡ </li>
<li>æ¸…æ™°å®šä¹‰åŠŸèƒ½,å˜åŒ–è¡Œä¸º&#x2F;è‡ªå®šä¹‰ç•Œâ¾¯é¢ </li>
<li>æ¾æ•£è€¦åˆ,å®¹æ˜“æ‰©å±•</li>
</ul>
<p>ä»¥ Master-Detail Application æ¨¡æ¿è¯¦ç»†ä»‹ç»äº†å§”æ‰˜æ¨¡å¼ã€‚å­”è€å¸ˆå–œæ¬¢ç›´æ¥çœ‹ç±»çš„å®šä¹‰ã€‚</p>
<p><img src="http://i.imgur.com/ijupTTB.png" alt="UITableView delegation"><br><img src="http://i.imgur.com/QPtgCFl.png" alt="Jump to Definition"><br><img src="http://i.imgur.com/eUzOn9O.png" alt="UITableViewDataSource"></p>
<h2 id="7-è§‚å¯Ÿè€…å’Œæ¶ˆæ¯é€šçŸ¥"><a href="#7-è§‚å¯Ÿè€…å’Œæ¶ˆæ¯é€šçŸ¥" class="headerlink" title="7. è§‚å¯Ÿè€…å’Œæ¶ˆæ¯é€šçŸ¥"></a>7. è§‚å¯Ÿè€…å’Œæ¶ˆæ¯é€šçŸ¥</h2><p><img src="http://i.imgur.com/i8HTac7.png" alt="MVC"><br><img src="http://cdn.cocimg.com/cms/uploads/allimg/130506/4196_130506095606_1.png" alt="Observer pattern"></p>
<ul>
<li>å®šä¹‰å¯¹è±¡é—´ä¸€ç§â¼€å¯¹å¤šçš„ä¾èµ–å…³ç³»,ä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€,åˆ™æ‰€æœ‰ä¾èµ–äºä»–çš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚</li>
<li>Subjectè¢«è§‚å¯Ÿè€…ï¼šå®šä¹‰è¢«è§‚å¯Ÿè€…å¿…é¡»å®ç°çš„èŒè´£,å®ƒå¿…é¡»èƒ½å¤ŸåŠ¨æ€çš„å¢åŠ ã€å–æ¶ˆ è§‚å¯Ÿè€…ã€‚å®ƒä¸€èˆ¬æ˜¯æŠ½è±¡ç±»æˆ–è€…æ˜¯å®ç°ç±»,ä»…ä»…å®Œæˆä½œä¸ºè¢«è§‚å¯Ÿè€…å¿…é¡»å®ç°çš„èŒè´£<br>ï¼šç®¡ç†è§‚å¯Ÿè€…å¹¶é€šçŸ¥è§‚å¯Ÿè€…</li>
<li>Observerè§‚å¯Ÿè€…ï¼šè§‚å¯Ÿè€…æ¥æ”¶åˆ°æ¶ˆæ¯å,å³è¿›è¡Œupdate(æ›´æ–°æ–¹æ³•)æ“ä½œ,å¯¹æ¥æ”¶åˆ°çš„ä¿¡æ¯è¿›è¡Œå¤„ç†ã€‚</li>
<li>å…·ä½“çš„è¢«è§‚å¯Ÿè€…ï¼šå®šä¹‰è¢«è§‚å¯Ÿè€…è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘,åŒæ—¶å®šä¹‰å¯¹å“ªäº›äº‹ä»¶è¿›è¡Œé€šçŸ¥ã€‚</li>
<li>å…·ä½“çš„è§‚å¯Ÿè€…ï¼šæ¯ä¸ªè§‚å¯Ÿè€…åœ¨æ¥æ”¶åˆ°æ¶ˆæ¯åçš„å¤„ç†ååº”æ˜¯ä¸åŒçš„,å„ä¸ªè§‚å¯Ÿè€…æœ‰è‡ªå·±çš„å¤„ç†é€»è¾‘ã€‚</li>
</ul>
<h3 id="é€šçŸ¥"><a href="#é€šçŸ¥" class="headerlink" title="é€šçŸ¥"></a>é€šçŸ¥</h3><p><img src="http://i.imgur.com/18qyxxi.png" alt="Notification pattern"></p>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>çª—å£å˜åŒ–é€šçŸ¥ </li>
<li>ç³»ç»Ÿé”®ç›˜çš„å‡ºç°å’Œæ¶ˆå¤±&#x2F;ä½ç½®â¼¤å°å˜åŒ–</li>
<li>UITextField å­—ç¬¦å˜åŒ–é€šçŸ¥(å¯ä»¥ç”¨æ¥é™åˆ¶è¾“å…¥é•¿åº¦)</li>
<li>MPMoviePlayerController æ’­æ”¾å™¨çš„â¾ä¸ºå˜åŒ–(å¼€å§‹ç»“æŸç­‰äº‹ä»¶) </li>
<li>è‡ªå®šä¹‰Classä½¿ç”¨</li>
</ul>
<p>ä»£ç å®ç°å‚çœ‹æä¹…å¯§çš„æ–‡ç« ï¼š<a target="_blank" rel="noopener" href="http://www.cnblogs.com/limlee/archive/2012/06/21/2547582.html">iOS è®¾è®¡æ¨¡å¼ä¹‹å››ï¼šè§‚å¯Ÿè€…æ¨¡å¼</a></p>
<h3 id="Key-Value-Coding-and-Key-Value-Observing"><a href="#Key-Value-Coding-and-Key-Value-Observing" class="headerlink" title="Key-Value-Coding and Key-Value-Observing"></a>Key-Value-Coding and Key-Value-Observing</h3><p>å¯åœ¨ Xcode ä¸­ Open Quickly(â‡§âŒ˜O)ï¼ŒæŸ¥çœ‹<code>NSKeyValueCoding.h</code>åè®®çš„å†…å®¹ã€‚</p>
<p>å…¸å‹çš„ä¾‹å­ NSOperation and NSOperationQueue</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*	NSOperation.h</span></span><br><span class="line"><span class="comment">	Copyright (c) 2006-2014, Apple Inc. All rights reserved.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSOperation</span> : <span class="title">NSObject</span> </span>&#123;</span><br><span class="line"><span class="keyword">@private</span></span><br><span class="line">    <span class="type">id</span> _private;</span><br><span class="line">    int32_t _private1;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> __LP64__</span></span><br><span class="line">    int32_t _private1b;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)start;</span><br><span class="line">- (<span class="type">void</span>)main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">getter</span>=isCancelled) <span class="type">BOOL</span> cancelled;</span><br><span class="line">- (<span class="type">void</span>)cancel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">getter</span>=isExecuting) <span class="type">BOOL</span> executing;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">getter</span>=isFinished) <span class="type">BOOL</span> finished;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">getter</span>=isConcurrent) <span class="type">BOOL</span> concurrent; <span class="comment">// To be deprecated; use and override &#x27;asynchronous&#x27; below</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">getter</span>=isAsynchronous) <span class="type">BOOL</span> asynchronous <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_8, <span class="number">7</span>_0);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">getter</span>=isReady) <span class="type">BOOL</span> ready;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/42743-6dd68172ae4cbf64.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="NSOperationQueue"></p>
<p>###å»¶ä¼¸é˜…è¯»ï¼š</p>
<ul>
<li>Apple <a target="_blank" rel="noopener" href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html#//apple_ref/doc/uid/10000107-SW1">Key-Value Coding Programming Guide</a><blockquote>
<p>This document describes the NSKeyValueCoding informal protocol, which defines a mechanism allowing applications to access the properties of an object indirectly by name (or key), rather than directly through invocation of an accessor method or as instance variables.</p>
</blockquote>
<blockquote>
<p>Dot Syntax and Key-Value Coding: Objective-Câ€™s dot syntax and key-value coding are orthogonal technologies. You can use key-value coding whether or not you use the dot syntax, and you can use the dot syntax whether or not you use KVC. Both, though, make use of a â€œdot syntax.â€ In the case of key-value coding, the syntax is used to delimit elements in a key path. Remember that when you access a property using the dot syntax, you invoke the receiverâ€™s standard accessor methods.</p>
</blockquote>
</li>
<li><a target="_blank" rel="noopener" href="http://objccn.io/issue-7-3/">KVC å’Œ KVO</a></li>
<li><a target="_blank" rel="noopener" href="http://objccn.io/issue-7-4/">æ¶ˆæ¯ä¼ é€’æœºåˆ¶</a><blockquote>
<p>æˆ‘ä»¬ä¼šå¸¸å¸¸æåŠâ€œæ¥æ”¶è€…â€å’Œâ€œå‘é€è€…â€ã€‚å®ƒä»¬åœ¨æ¶ˆæ¯ä¼ é€’ä¸­çš„æ„æ€å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„ä¾‹å­è§£é‡Šï¼šä¸€ä¸ª table view æ˜¯å‘é€è€…ï¼Œå®ƒçš„ delegate å°±æ˜¯æ¥æ”¶è€…ã€‚Core Data managed object context æ˜¯å®ƒæ‰€å‘å‡ºçš„ notification çš„å‘é€è€…ï¼Œè·å– notification çš„å°±æ˜¯æ¥æ”¶è€…ã€‚ä¸€ä¸ªæ»‘å— (slider) æ˜¯ action æ¶ˆæ¯çš„å‘é€è€…ï¼Œè€Œå®ç°è¿™ä¸ª action ï¼ˆæ–¹æ³•ï¼‰çš„æ˜¯å®ƒçš„æ¥æ”¶è€…ã€‚ä»»ä½•ä¿®æ”¹ä¸€ä¸ªæ”¯æŒ KVO çš„å¯¹è±¡çš„å¯¹è±¡æ˜¯å‘é€è€…ï¼Œè¿™ä¸ª KVO å¯¹è±¡çš„è§‚å¯Ÿè€…å°±æ˜¯æ¥æ”¶è€…ã€‚æ˜ç™½ç²¾é«“äº†å—ï¼Ÿ<br>åŸºäºä¸åŒæ¶ˆæ¯ä¼ é€’æœºåˆ¶çš„ç‰¹ç‚¹çš„æµç¨‹å›¾<br><img src="http://img.objccn.io/issue-7/communication-patterns-flow-chart.png" alt="communication-patterns-flow-chart"></p>
</blockquote>
</li>
</ul>
<h2 id="9-å½’æ¡£å’Œè§£æ¡£"><a href="#9-å½’æ¡£å’Œè§£æ¡£" class="headerlink" title="9. å½’æ¡£å’Œè§£æ¡£"></a>9. å½’æ¡£å’Œè§£æ¡£</h2><p>###NSCoding </p>
<p>æ˜¯ä¸€ä¸ªç®€å•çš„åè®®ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š -initWithCoder: å’Œ encodeWithCoder:ã€‚éµå¾ªNSCodingåè®®çš„ç±»å¯ä»¥è¢«åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œè¿™æ ·å¯ä»¥å½’æ¡£åˆ°ç£ç›˜ä¸Šæˆ–åˆ†å‘åˆ°ç½‘ç»œä¸Šã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Book</span> : <span class="title">NSObject</span> &lt;<span class="title">NSCoding</span>&gt;</span></span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span> *title;</span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span> *author;</span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSUInteger</span> pageCount;</span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSSet</span> *categories;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">getter</span> = isAvailable) <span class="type">BOOL</span> available;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Book</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - NSCoding</span></span><br><span class="line"></span><br><span class="line">- (<span class="type">id</span>)initWithCoder:(<span class="built_in">NSCoder</span> *)decoder &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="variable language_">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.title = [decoder decodeObjectForKey:<span class="string">@&quot;title&quot;</span>];</span><br><span class="line">    <span class="keyword">self</span>.author = [decoder decodeObjectForKey:<span class="string">@&quot;author&quot;</span>];</span><br><span class="line">    <span class="keyword">self</span>.pageCount = [decoder decodeIntegerForKey:<span class="string">@&quot;pageCount&quot;</span>];</span><br><span class="line">    <span class="keyword">self</span>.categories = [decoder decodeObjectForKey:<span class="string">@&quot;categories&quot;</span>];</span><br><span class="line">    <span class="keyword">self</span>.available = [decoder decodeBoolForKey:<span class="string">@&quot;available&quot;</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)encodeWithCoder:(<span class="built_in">NSCoder</span> *)encoder &#123;</span><br><span class="line">    [encoder encodeObject:<span class="keyword">self</span>.title forKey:<span class="string">@&quot;title&quot;</span>];</span><br><span class="line">    [encoder encodeObject:<span class="keyword">self</span>.author forKey:<span class="string">@&quot;author&quot;</span>];</span><br><span class="line">    [encoder encodeInteger:<span class="keyword">self</span>.pageCount forKey:<span class="string">@&quot;pageCount&quot;</span>];</span><br><span class="line">    [encoder encodeObject:<span class="keyword">self</span>.categories forKey:<span class="string">@&quot;categories&quot;</span>];</span><br><span class="line">    [encoder encodeBool:[<span class="keyword">self</span> isAvailable] forKey:<span class="string">@&quot;available&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>


<h3 id="NSKeyedArchiver-å’Œ-NSKeyedUnarchiver"><a href="#NSKeyedArchiver-å’Œ-NSKeyedUnarchiver" class="headerlink" title="NSKeyedArchiver å’Œ NSKeyedUnarchiver"></a>NSKeyedArchiver å’Œ NSKeyedUnarchiver</h3><p>æä¾›äº†å¾ˆæ–¹ä¾¿çš„APIæŠŠå¯¹è±¡è¯»å–&#x2F;å†™å…¥ç£ç›˜ã€‚ä¸€ä¸ªåŸºäºNSCodingçš„table view controllerå¯ä»¥é€šè¿‡file managerè®¾ç½®å®ƒçš„å±æ€§é›†åˆã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">NSKeyedArchiver</span> archiveRootObject:books toFile:<span class="string">@&quot;/path/to/archive&quot;</span>];</span><br><span class="line"></span><br><span class="line">[<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithFile:<span class="string">@&quot;/path/to/archive&quot;</span>];</span><br></pre></td></tr></table></figure>

<h3 id="NSUserDefaults"><a href="#NSUserDefaults" class="headerlink" title="NSUserDefaults"></a>NSUserDefaults</h3><p>æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½æœ‰è‡ªå·±çš„user preferencesï¼Œå®ƒå¯ä»¥å­˜å‚¨å’Œæ£€ç´¢éµå¾ªNSCodingåè®®çš„å¯¹è±¡æˆ–è€…æ˜¯Cç±»å‹æ•°æ®ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSData</span> *data = [<span class="built_in">NSKeyedArchiver</span> archivedDataWithRootObject:books];</span><br><span class="line">[[<span class="built_in">NSUserDefaults</span> standardUserDefaults] setObject:data forKey:<span class="string">@&quot;books&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSData</span> *data = [[<span class="built_in">NSUserDefaults</span> standardUserDefaults] objectForKey:<span class="string">@&quot;books&quot;</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *books = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithData:data];</span><br></pre></td></tr></table></figure>

<p>###å»¶ä¼¸é˜…è¯»ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://nshipster.cn/nscoding/">NSCoding &#x2F; NSKeyedâ€‹Archiver</a></li>
<li><a target="_blank" rel="noopener" href="http://nshipster.cn/nsfilemanager/">NSFileâ€‹Manager</a></li>
</ul>
<h2 id="10-å¤åˆ¶æ¨¡å¼"><a href="#10-å¤åˆ¶æ¨¡å¼" class="headerlink" title="10. å¤åˆ¶æ¨¡å¼"></a>10. å¤åˆ¶æ¨¡å¼</h2><ul>
<li>åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ–°å‰¯æœ¬</li>
<li>å¤åˆ¶ä¸€ä¸ªå¤æ‚å¯¹è±¡æ—¶,ä¿æŠ¤ä¸€ä¸ªä¸€æ ·çš„å¯¹è±¡,è¿˜æ˜¯åŒ…å«åŸæ¥å¯¹è±¡çš„å‰¯æœ¬</li>
<li>ç”¨æˆ·ç•Œé¢ä¸Šçš„å¤åˆ¶&#x2F;ç²˜è´´ æœ‰äº›å¯¹è±¡å°è£…äº†ç‹¬ä¸€æ— â¼†çš„èµ„æº,å¤åˆ¶æ²¡æœ‰æ„ä¹‰</li>
<li>æµ…å¤åˆ¶å’Œæ·±å¤åˆ¶ã€‚é¡¾åæ€ä¹‰,æµ…å¤åˆ¶,å¹¶ä¸æ‹·â»‰å¯¹è±¡æœ¬â¾,ä»…ä»…æ˜¯æ‹·è´æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆ;æ·±å¤åˆ¶æ˜¯ç›´æ¥æ‹·è´æ•´ä¸ªå¯¹è±¡å†…å­˜åˆ°å¦â¼€å—å†…å­˜ä¸­</li>
</ul>
<p><code>- initWithDictionary:copyItems</code> å°±æ˜¯ä¸ªå…¸å‹ä¾‹å­ï¼Œå¯æ·±å¯æµ…ã€‚</p>
<p>å‚çœ‹ MicroCai çš„æ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://www.zybuluo.com/MicroCai/note/50592">iOS é›†åˆçš„æ·±å¤åˆ¶ä¸æµ…å¤åˆ¶ </a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/08/18/ICF-12-Core-Data-Primer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/18/ICF-12-Core-Data-Primer/" class="post-title-link" itemprop="url">ICF 12ç«  Core Data ç®€ä»‹</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-08-18 20:53:18" itemprop="dateCreated datePublished" datetime="2015-08-18T20:53:18+08:00">2015-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Core Data æœ‰ç‚¹å¤æ‚ï¼Œæ˜æ˜ä¸€ä¸ªæ•°æ®åº“ï¼Œè¢«è‹¹æœæ•´çš„è¿™ä¹ˆå¤æ‚ã€‚ç»“æœäº†è¿˜æ˜¯çœ‹ç¿»è¯‘çš„ä¹¦æ‰æ˜ç™½ï¼Œå¤ªå¤šæ–°çš„æ¦‚å¿µéœ€è¦æ¶ˆåŒ–ã€‚</p>
<p><a target="_blank" rel="noopener" href="http://book.douban.com/subject/26284107/">ã€ŠiOS ç»„ä»¶ä¸æ¡†æ¶ã€‹</a> </p>
<p>Core Data æä¾›äº†ç›´æ¥ä½¿ç”¨ SQLite çš„å¤§éƒ¨åˆ†å¤§éƒ¨åˆ†çµæ´»æ€§ï¼ŒåŒæ—¶æ— éœ€å…³å¿ƒå…³ç³»æ•°æ®åº“ä½¿ç”¨æœºåˆ¶ã€‚</p>
<ul>
<li><p>æ‰˜ç®¡å¯¹è±¡ï¼ˆManaged objectï¼‰æ˜¯ NSManagedObject å®ä¾‹ï¼Œåº”ç”¨ä¸»è¦ä¸ä¹‹äº¤äº’ã€‚å¯è§†ä¸ºå­—å…¸ã€‚åŒ…å«ä¸€ç»„é”®å€¼å¯¹ã€‚æ‰˜ç®¡å¯¹è±¡ä¹‹é—´å¯ä»¥å»ºç«‹å…³ç³»ã€‚</p>
</li>
<li><p>æ‰˜ç®¡å¯¹è±¡æ˜¯åœ¨æ‰˜ç®¡å¯¹è±¡æ¨¡å‹ï¼ˆNSManagedObjectModelï¼‰ä¸­å®šä¹‰çš„ã€‚æ‰˜ç®¡å¯¹è±¡æ¨¡å‹åŒ…å«ä¸€ç³»åˆ—å®ä½“ã€å®ä½“çš„ç‰¹æ€§ã€ç‰¹æ€§å’Œå®ä½“çš„æœ‰æ•ˆæ€§çº¦æŸä»¥åŠå®ä½“ä¹‹é—´çš„å…³ç³»ã€‚é€šå¸¸åœ¨ Xcode ä¸­å¯è§†åŒ–æ¨¡å‹ç¼–è¾‘å™¨åˆ›å»ºçš„ã€‚</p>
</li>
<li><p>æ‰˜ç®¡å¯¹è±¡åªèƒ½å­˜åœ¨äºæ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡ä¸­ï¼ˆNSManagedObjectContextï¼‰ï¼Œå³ Core Data çš„å·¥ä½œåŒºã€‚æ‰˜ç®¡å¯¹è±¡åªèƒ½åœ¨æ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºæˆ–è·å–ã€‚</p>
</li>
<li><p>Core Data éœ€è¦æŒ‡å®šæ‰˜ç®¡å¯¹è±¡å¯¹åº”çš„å®ä½“ï¼Œå¯ä½¿ç”¨ NSEntityDescription </p>
</li>
<li><p>å¯¹è±¡çš„æ£€ç´¢ï¼šç›´æ¥ä½¿ç”¨ objectIDï¼›ç¼–å†™æ£€ç´¢è¯·æ±‚</p>
</li>
<li><p>æ£€ç´¢è¯·æ±‚å¯åŒ…å«ï¼šæ’åºæè¿°ç¬¦ï¼ˆNSSortDescriptorï¼‰ã€è°“è¯ï¼ˆNSPredicateï¼‰ã€è¿”å›èšåˆå‡½æ•°ï¼ˆå¦‚ sum å’Œ countï¼‰çš„ç»“æœã€‚</p>
</li>
<li><p>æ£€ç´¢ç»“æœæ§åˆ¶å™¨ï¼ˆfetched results controllerï¼‰å¯ä»¥è®²æ£€ç´¢è¯·æ±‚ä¸ UITableView å…³è”èµ·æ¥ã€‚ä½¿ç”¨å§”æ‰˜æ–¹æ³•å¯ä»¥æ›´æ–°è¡¨è§†å›¾ã€‚</p>
</li>
<li><p>Core Data ç¯å¢ƒ</p>
<p> <img src="https://developer.apple.com/library/mac/documentation/DataManagement/Devpedia-CoreData/Art/single_persistent_stack.jpg" alt="Core Data stack"></p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/08/18/Functions-and-Methods/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/18/Functions-and-Methods/" class="post-title-link" itemprop="url">Functions and Methods</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-08-18 10:55:21" itemprop="dateCreated datePublished" datetime="2015-08-18T10:55:21+08:00">2015-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>å‡½æ•°ï¼ˆFunctionsï¼‰æ˜¯ç”¨æ¥å®Œæˆç‰¹åœ°ä»»åŠ¡çš„ç‹¬ç«‹çš„ä»£ç å—ï¼›æ–¹æ³•ï¼ˆMethodsï¼‰æ˜¯ä¸æŸäº›ç‰¹å®šç±»å‹ç›¸å…³è”çš„å‡½æ•°ã€‚æ‰€ä»¥ Swift ä¸­éƒ½ç”¨çš„ func å…³é”®è¯ã€‚ ç»“æ„ä½“å’Œæšä¸¾èƒ½å¤Ÿå®šä¹‰æ–¹æ³•æ˜¯ Swift ä¸ C&#x2F;Objective-C çš„ä¸»è¦åŒºåˆ«ä¹‹ä¸€ã€‚</p>
<p>Functions are self-contained chunks of code that perform a specific task.</p>
<p>Methods are functions that are associated with a particular type: classes, structures, and enumerations.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/08/17/Sketch-3-Tutorials-by-LevelUpTuts/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/17/Sketch-3-Tutorials-by-LevelUpTuts/" class="post-title-link" itemprop="url">Sketch 3 Tutorials by LevelUpTuts</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-08-17 22:39:30" itemprop="dateCreated datePublished" datetime="2015-08-17T22:39:30+08:00">2015-08-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Sketch 3 Tutorials by LevelUpTuts: <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=-1BMzQLq7zk">https://www.youtube.com/watch?v=-1BMzQLq7zk</a></p>
<p>A very basic tutorial, and very detailed. But lots of plugins usage.</p>
<h2 id="6-Using-Text-Styles"><a href="#6-Using-Text-Styles" class="headerlink" title="6. Using Text Styles"></a>6. Using Text Styles</h2><p>Just like CSS style, change it every text in the style will update.</p>
<h2 id="9-Shapes-in-Sketch-3"><a href="#9-Shapes-in-Sketch-3" class="headerlink" title="9. Shapes in Sketch 3"></a>9. Shapes in Sketch 3</h2><p>Star and Polygon can change Points.</p>
<h2 id="10-Creating-and-Using-Symbols"><a href="#10-Creating-and-Using-Symbols" class="headerlink" title="10. Creating and Using Symbols"></a>10. Creating and Using Symbols</h2><blockquote>
<p>Symbols is one of the brand new features in Sketch 3.0 and it allows you to re-use Groups, Layer and Text Styles in your document. Once added, simply insert them via Insert &gt; Symbol in the toolbar.</p>
</blockquote>
<h2 id="11-iOS-Design-UI-Tools"><a href="#11-iOS-Design-UI-Tools" class="headerlink" title="11. iOS Design UI Tools"></a>11. iOS Design UI Tools</h2><p>We use collections of symbols and text styles inside Sketch: File -&gt; New From Template.</p>
<h2 id="19-Extending-Sketch-With-Free-Resources"><a href="#19-Extending-Sketch-With-Free-Resources" class="headerlink" title="19. Extending Sketch With Free Resources"></a>19. Extending Sketch With Free Resources</h2><blockquote>
<p>Sketch App Sources is a website that focuses on providing resources for Sketch 3 by Bohemian Coding.<br>We aim to provide top quality resources that designers love to use, and make their workflow simpler and more enjoyable.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="http://www.sketchappsources.com/">http://www.sketchappsources.com/</a> </p>
<h2 id="20-Create-Animated-GIFs"><a href="#20-Create-Animated-GIFs" class="headerlink" title="20. Create Animated GIFs"></a>20. Create Animated GIFs</h2><p>Generate-GIF: plugin for generating animated GIFs</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/08/17/Sketch-more-efficient/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/17/Sketch-more-efficient/" class="post-title-link" itemprop="url">Sketchï¼šæ•ˆç‡æé«˜ç¯‡</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-08-17 21:42:01" itemprop="dateCreated datePublished" datetime="2015-08-17T21:42:01+08:00">2015-08-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>è§†é¢‘è¯¾ç¨‹åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://www.jikexueyuan.com/course/1420.html">http://www.jikexueyuan.com/course/1420.html
</a></p>
<p>å¿«æ·é”®çš„ä½¿ç”¨åªæ˜¯æ“ä½œæé«˜é€Ÿåº¦ï¼Œè¿˜éœ€è¦å­¦ä¹ æ›´å¤šçš„è®¾è®¡æ–¹é¢çš„æŠ€å·§ã€‚è§†é¢‘å­¦ä¹ ç¡®å®é€Ÿåº¦å¤Ÿå¿«ï¼Œå°±åƒçœ‹ç”µå½±ï¼Œä¸å®¹æš‚åœåˆ†å¿ƒæ‰èƒ½è·Ÿä¸Šè¿›åº¦ã€‚</p>
<ul>
<li>å¸¸ç”¨å¿«æ·é”®å’Œè‡ªå®šä¹‰å¿«æ·é”®</li>
<li>å¿«é€Ÿå¯¼å‡ºå›¾ç‰‡èµ„æº</li>
<li>ä½¿ç”¨å¿«æ·é”®æ§åˆ¶å®šä½è§†å›¾</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2015/08/16/how-to-play-record-edit-videos-in-ios-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ge Will">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will's Blog">
      <meta itemprop="description" content="The people who are crazy enough to think they can change the world, are the ones who DO.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Will's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/16/how-to-play-record-edit-videos-in-ios-notes/" class="post-title-link" itemprop="url">How to Play, Record, and Edit Videos in iOS - Notes</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-08-16 11:40:27" itemprop="dateCreated datePublished" datetime="2015-08-16T11:40:27+08:00">2015-08-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-08 17:06:49" itemprop="dateModified" datetime="2023-09-08T17:06:49+08:00">2023-09-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Original post on Ray Wenderlich: <a target="_blank" rel="noopener" href="http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios">http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios</a></p>
<p>This post is a step by step instruction. Now I copy add some explanation just in the code. Hope I can understand the every step meaning and easy to read.</p>
<p><img src="http://ww1.sinaimg.cn/large/5369602egw1ev5ae7lzbnj20w80kigof.jpg" alt="Edit in AVFoundation"></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  MergeVideo.m</span></span><br><span class="line"><span class="comment">//  VideoPlayRecord</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Abdul Azeem Khan on 5/9/12.</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2012 DataInvent. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="string">&quot;MergeVideo.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MergeVideo</span></span></span><br><span class="line"><span class="keyword">@synthesize</span> ActivityView;</span><br><span class="line"><span class="keyword">@synthesize</span> firstAsset, secondAsset, audioAsset;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)viewDidLoad &#123;</span><br><span class="line">    </span><br><span class="line">    [<span class="variable language_">super</span> viewDidLoad];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;Loaded&quot;</span>);</span><br><span class="line">	<span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)didReceiveMemoryWarning &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Releases the view if it doesn&#x27;t have a superview.</span></span><br><span class="line">    [<span class="variable language_">super</span> didReceiveMemoryWarning];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Release any cached data, images, etc that aren&#x27;t in use.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - View lifecycle</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - Load assests methods</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">IBAction</span>)LoadAssetOne:(<span class="type">id</span>)sender &#123;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="built_in">UIImagePickerController</span> isSourceTypeAvailable:</span><br><span class="line">         <span class="built_in">UIImagePickerControllerSourceTypeSavedPhotosAlbum</span>] == <span class="literal">NO</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc] initWithTitle:<span class="string">@&quot;Error&quot;</span> message:<span class="string">@&quot;No Saved Album Found&quot;</span>  delegate:<span class="literal">nil</span> cancelButtonTitle:<span class="string">@&quot;Ok&quot;</span> otherButtonTitles: <span class="literal">nil</span>, <span class="literal">nil</span>];</span><br><span class="line">        [alert show];        </span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        isSelectingAssetOne = <span class="literal">TRUE</span>;</span><br><span class="line">        [<span class="keyword">self</span> startMediaBrowserFromViewController: <span class="keyword">self</span></span><br><span class="line">                                    usingDelegate: <span class="keyword">self</span>];  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">IBAction</span>)LoadAssetTwo:(<span class="type">id</span>)sender &#123;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="built_in">UIImagePickerController</span> isSourceTypeAvailable:</span><br><span class="line">         <span class="built_in">UIImagePickerControllerSourceTypeSavedPhotosAlbum</span>] == <span class="literal">NO</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc] initWithTitle:<span class="string">@&quot;Error&quot;</span> message:<span class="string">@&quot;No Saved Album Found&quot;</span>  delegate:<span class="literal">nil</span> cancelButtonTitle:<span class="string">@&quot;Ok&quot;</span> otherButtonTitles: <span class="literal">nil</span>, <span class="literal">nil</span>];</span><br><span class="line">        [alert show];</span><br><span class="line">        </span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        isSelectingAssetOne = <span class="literal">FALSE</span>;</span><br><span class="line">        [<span class="keyword">self</span> startMediaBrowserFromViewController: <span class="keyword">self</span></span><br><span class="line">                                    usingDelegate: <span class="keyword">self</span>];  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="type">BOOL</span>) startMediaBrowserFromViewController: (<span class="built_in">UIViewController</span>*) controller</span><br><span class="line">                               usingDelegate: (<span class="type">id</span> &lt;<span class="built_in">UIImagePickerControllerDelegate</span>,</span><br><span class="line">                                               <span class="built_in">UINavigationControllerDelegate</span>&gt;) delegate &#123;</span><br><span class="line">    <span class="keyword">if</span> (([<span class="built_in">UIImagePickerController</span> isSourceTypeAvailable:</span><br><span class="line">          <span class="built_in">UIImagePickerControllerSourceTypeSavedPhotosAlbum</span>] == <span class="literal">NO</span>)</span><br><span class="line">        || (delegate == <span class="literal">nil</span>)</span><br><span class="line">        || (controller == <span class="literal">nil</span>))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    <span class="built_in">UIImagePickerController</span> *mediaUI = [[<span class="built_in">UIImagePickerController</span> alloc] init];</span><br><span class="line">    mediaUI.sourceType = <span class="built_in">UIImagePickerControllerSourceTypeSavedPhotosAlbum</span>;</span><br><span class="line">    </span><br><span class="line">    mediaUI.mediaTypes = [[<span class="built_in">NSArray</span> alloc] initWithObjects: (<span class="built_in">NSString</span> *) kUTTypeMovie, <span class="literal">nil</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Hides the controls for moving &amp; scaling pictures, or for</span></span><br><span class="line">    <span class="comment">// trimming movies. To instead show the controls, use YES.</span></span><br><span class="line">    mediaUI.allowsEditing = <span class="literal">YES</span>;</span><br><span class="line">    </span><br><span class="line">    mediaUI.delegate = delegate;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span> presentViewController: mediaUI animated: <span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">IBAction</span>)LoadAudio:(<span class="type">id</span>)sender &#123;</span><br><span class="line">    <span class="built_in">MPMediaPickerController</span> *mediaPicker = [[<span class="built_in">MPMediaPickerController</span> alloc] initWithMediaTypes: <span class="built_in">MPMediaTypeAny</span>];</span><br><span class="line">    mediaPicker.delegate = <span class="keyword">self</span>;</span><br><span class="line">    mediaPicker.prompt = <span class="string">@&quot;Select Music&quot;</span>;</span><br><span class="line">    [<span class="keyword">self</span> presentViewController:mediaPicker animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - Conform MPMediaPickerControllerDelegate</span></span><br><span class="line">- (<span class="type">void</span>) mediaPicker: (<span class="built_in">MPMediaPickerController</span> *) mediaPicker didPickMediaItems: (<span class="built_in">MPMediaItemCollection</span> *) mediaItemCollection</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSArray</span> * SelectedSong = [mediaItemCollection items];</span><br><span class="line">    <span class="keyword">if</span>([SelectedSong count]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">MPMediaItem</span> * SongItem = [SelectedSong objectAtIndex:<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">NSURL</span> *SongURL = [SongItem valueForProperty: <span class="built_in">MPMediaItemPropertyAssetURL</span>];</span><br><span class="line">        </span><br><span class="line">        audioAsset = [<span class="built_in">AVAsset</span> assetWithURL:SongURL];</span><br><span class="line">         <span class="built_in">NSLog</span>(<span class="string">@&quot;Audio Loaded&quot;</span>);</span><br><span class="line">         <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc] initWithTitle:<span class="string">@&quot;Asset Loaded&quot;</span> message:<span class="string">@&quot;Audio Loaded&quot;</span>  delegate:<span class="literal">nil</span> cancelButtonTitle:<span class="string">@&quot;Ok&quot;</span> otherButtonTitles: <span class="literal">nil</span>, <span class="literal">nil</span>];</span><br><span class="line">         [alert show];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span> dismissViewControllerAnimated: <span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>) mediaPickerDidCancel: (<span class="built_in">MPMediaPickerController</span> *) mediaPicker &#123;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span> dismissViewControllerAnimated: <span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - Conform UIImagePickerControllerDelegate</span></span><br><span class="line"><span class="comment">// For responding to the user tapping Cancel.</span></span><br><span class="line">- (<span class="type">void</span>) imagePickerControllerDidCancel: (<span class="built_in">UIImagePickerController</span> *) picker &#123;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span> dismissViewControllerAnimated: <span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// For responding to the user accepting a newly-captured picture or movie</span></span><br><span class="line">- (<span class="type">void</span>) imagePickerController: (<span class="built_in">UIImagePickerController</span> *) picker</span><br><span class="line"> didFinishPickingMediaWithInfo: (<span class="built_in">NSDictionary</span> *) info &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSString</span> *mediaType = [info objectForKey: <span class="built_in">UIImagePickerControllerMediaType</span>];</span><br><span class="line">    [<span class="keyword">self</span> dismissModalViewControllerAnimated:<span class="literal">NO</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Handle a movie capture</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">CFStringCompare</span> ((__bridge_retained <span class="built_in">CFStringRef</span>) mediaType, kUTTypeMovie, <span class="number">0</span>)</span><br><span class="line">        == kCFCompareEqualTo) &#123;</span><br><span class="line">        <span class="keyword">if</span>(isSelectingAssetOne)&#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;Video One  Loaded&quot;</span>);</span><br><span class="line">            <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc] initWithTitle:<span class="string">@&quot;Asset Loaded&quot;</span> message:<span class="string">@&quot;Video One Loaded&quot;</span>  delegate:<span class="literal">nil</span> cancelButtonTitle:<span class="string">@&quot;Ok&quot;</span> otherButtonTitles: <span class="literal">nil</span>, <span class="literal">nil</span>];</span><br><span class="line">            [alert show];</span><br><span class="line">            firstAsset = [<span class="built_in">AVAsset</span> assetWithURL:[info objectForKey:<span class="built_in">UIImagePickerControllerMediaURL</span>]];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;Video two Loaded&quot;</span>);</span><br><span class="line">            <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc] initWithTitle:<span class="string">@&quot;Asset Loaded&quot;</span> message:<span class="string">@&quot;Video Two Loaded&quot;</span>  delegate:<span class="literal">nil</span> cancelButtonTitle:<span class="string">@&quot;Ok&quot;</span> otherButtonTitles: <span class="literal">nil</span>, <span class="literal">nil</span>];</span><br><span class="line">            [alert show];</span><br><span class="line">            secondAsset = [<span class="built_in">AVAsset</span> assetWithURL:[info objectForKey:<span class="built_in">UIImagePickerControllerMediaURL</span>]];        </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - MergeAndSave methods</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">IBAction</span>)MergeAndSave:(<span class="type">id</span>)sender &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(firstAsset !=<span class="literal">nil</span> &amp;&amp; secondAsset!=<span class="literal">nil</span>) &#123;</span><br><span class="line">        </span><br><span class="line">        [ActivityView startAnimating];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 1 - Create AVMutableComposition Object.This object will hold our multiple AVMutableCompositionTrack.</span></span><br><span class="line">        <span class="comment">// AVMutableComposition is a mutable subclass of AVComposition you use when you want to create a new composition from existing assets. You can add and remove tracks, and you can add, remove, and scale time ranges.</span></span><br><span class="line">        <span class="built_in">AVMutableComposition</span>* mixComposition = [[<span class="built_in">AVMutableComposition</span> alloc] init];</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// 2 - VIDEO TRACK</span></span><br><span class="line">        <span class="comment">// AVMutableCompositionTrack lets you for insert, remove, and scale track segments without affecting their low-level representation (that is, the operations you perform are non-destructive on the original).</span></span><br><span class="line">        <span class="built_in">AVMutableCompositionTrack</span> *firstTrack = [mixComposition addMutableTrackWithMediaType:<span class="built_in">AVMediaTypeVideo</span> preferredTrackID:kCMPersistentTrackID_Invalid];</span><br><span class="line">        [firstTrack insertTimeRange:<span class="built_in">CMTimeRangeMake</span>(kCMTimeZero, firstAsset.duration) ofTrack:[[firstAsset tracksWithMediaType:<span class="built_in">AVMediaTypeVideo</span>] objectAtIndex:<span class="number">0</span>] atTime:kCMTimeZero error:<span class="literal">nil</span>];</span><br><span class="line">       </span><br><span class="line">        <span class="built_in">AVMutableCompositionTrack</span> *secondTrack = [mixComposition addMutableTrackWithMediaType:<span class="built_in">AVMediaTypeVideo</span> preferredTrackID:kCMPersistentTrackID_Invalid];</span><br><span class="line">        [secondTrack insertTimeRange:<span class="built_in">CMTimeRangeMake</span>(kCMTimeZero, secondAsset.duration) ofTrack:[[secondAsset tracksWithMediaType:<span class="built_in">AVMediaTypeVideo</span>] objectAtIndex:<span class="number">0</span>] atTime:firstAsset.duration error:<span class="literal">nil</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3 - AUDIO TRACK</span></span><br><span class="line">        <span class="keyword">if</span>(audioAsset!=<span class="literal">nil</span>) &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">AVMutableCompositionTrack</span> *AudioTrack = [mixComposition addMutableTrackWithMediaType:<span class="built_in">AVMediaTypeAudio</span> preferredTrackID:kCMPersistentTrackID_Invalid];</span><br><span class="line">            [AudioTrack insertTimeRange:<span class="built_in">CMTimeRangeMake</span>(kCMTimeZero, <span class="built_in">CMTimeAdd</span>(firstAsset.duration, secondAsset.duration)) ofTrack:[[audioAsset tracksWithMediaType:<span class="built_in">AVMediaTypeAudio</span>] objectAtIndex:<span class="number">0</span>] atTime:kCMTimeZero error:<span class="literal">nil</span>];</span><br><span class="line">        &#125; </span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4 - Set AVMutableVideoCompositionLayerInstruction</span></span><br><span class="line">        <span class="comment">// AVMutableVideoCompositionLayerInstruction used to modify the transform, cropping, and opacity ramps to apply to a given track in a composition.</span></span><br><span class="line">        <span class="built_in">AVMutableVideoCompositionInstruction</span> * MainInstruction = [<span class="built_in">AVMutableVideoCompositionInstruction</span> videoCompositionInstruction];</span><br><span class="line">        MainInstruction.timeRange = <span class="built_in">CMTimeRangeMake</span>(kCMTimeZero, <span class="built_in">CMTimeAdd</span>(firstAsset.duration, secondAsset.duration));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//FIXING ORIENTATION//</span></span><br><span class="line">        <span class="built_in">AVMutableVideoCompositionLayerInstruction</span> *FirstlayerInstruction = [<span class="built_in">AVMutableVideoCompositionLayerInstruction</span> videoCompositionLayerInstructionWithAssetTrack:firstTrack];</span><br><span class="line">        <span class="built_in">AVAssetTrack</span> *FirstAssetTrack = [[firstAsset tracksWithMediaType:<span class="built_in">AVMediaTypeVideo</span>] objectAtIndex:<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">UIImageOrientation</span> FirstAssetOrientation_  = <span class="built_in">UIImageOrientationUp</span>;</span><br><span class="line">        <span class="type">BOOL</span>  isFirstAssetPortrait_  = <span class="literal">NO</span>;</span><br><span class="line">        <span class="built_in">CGAffineTransform</span> firstTransform = FirstAssetTrack.preferredTransform;</span><br><span class="line">        <span class="keyword">if</span>(firstTransform.a == <span class="number">0</span> &amp;&amp; firstTransform.b == <span class="number">1.0</span> &amp;&amp; firstTransform.c == <span class="number">-1.0</span> &amp;&amp; firstTransform.d == <span class="number">0</span>)  &#123;FirstAssetOrientation_= <span class="built_in">UIImageOrientationRight</span>; isFirstAssetPortrait_ = <span class="literal">YES</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(firstTransform.a == <span class="number">0</span> &amp;&amp; firstTransform.b == <span class="number">-1.0</span> &amp;&amp; firstTransform.c == <span class="number">1.0</span> &amp;&amp; firstTransform.d == <span class="number">0</span>)  &#123;FirstAssetOrientation_ =  <span class="built_in">UIImageOrientationLeft</span>; isFirstAssetPortrait_ = <span class="literal">YES</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(firstTransform.a == <span class="number">1.0</span> &amp;&amp; firstTransform.b == <span class="number">0</span> &amp;&amp; firstTransform.c == <span class="number">0</span> &amp;&amp; firstTransform.d == <span class="number">1.0</span>)   &#123;FirstAssetOrientation_ =  <span class="built_in">UIImageOrientationUp</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(firstTransform.a == <span class="number">-1.0</span> &amp;&amp; firstTransform.b == <span class="number">0</span> &amp;&amp; firstTransform.c == <span class="number">0</span> &amp;&amp; firstTransform.d == <span class="number">-1.0</span>) &#123;FirstAssetOrientation_ = <span class="built_in">UIImageOrientationDown</span>;&#125;</span><br><span class="line">        <span class="built_in">CGFloat</span> FirstAssetScaleToFitRatio = <span class="number">320.0</span>/FirstAssetTrack.naturalSize.width;</span><br><span class="line">        <span class="keyword">if</span>(isFirstAssetPortrait_)&#123;</span><br><span class="line">            FirstAssetScaleToFitRatio = <span class="number">320.0</span>/FirstAssetTrack.naturalSize.height;</span><br><span class="line">            <span class="built_in">CGAffineTransform</span> FirstAssetScaleFactor = <span class="built_in">CGAffineTransformMakeScale</span>(FirstAssetScaleToFitRatio,FirstAssetScaleToFitRatio);</span><br><span class="line">            [FirstlayerInstruction setTransform:<span class="built_in">CGAffineTransformConcat</span>(FirstAssetTrack.preferredTransform, FirstAssetScaleFactor) atTime:kCMTimeZero];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">CGAffineTransform</span> FirstAssetScaleFactor = <span class="built_in">CGAffineTransformMakeScale</span>(FirstAssetScaleToFitRatio,FirstAssetScaleToFitRatio);</span><br><span class="line">            [FirstlayerInstruction setTransform:<span class="built_in">CGAffineTransformConcat</span>(<span class="built_in">CGAffineTransformConcat</span>(FirstAssetTrack.preferredTransform, FirstAssetScaleFactor),<span class="built_in">CGAffineTransformMakeTranslation</span>(<span class="number">0</span>, <span class="number">160</span>)) atTime:kCMTimeZero];</span><br><span class="line">        &#125;</span><br><span class="line">        [FirstlayerInstruction setOpacity:<span class="number">0.0</span> atTime:firstAsset.duration];</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">AVMutableVideoCompositionLayerInstruction</span> *SecondlayerInstruction = [<span class="built_in">AVMutableVideoCompositionLayerInstruction</span> videoCompositionLayerInstructionWithAssetTrack:secondTrack];</span><br><span class="line">        <span class="built_in">AVAssetTrack</span> *SecondAssetTrack = [[secondAsset tracksWithMediaType:<span class="built_in">AVMediaTypeVideo</span>] objectAtIndex:<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">UIImageOrientation</span> SecondAssetOrientation_  = <span class="built_in">UIImageOrientationUp</span>;</span><br><span class="line">        <span class="type">BOOL</span>  isSecondAssetPortrait_  = <span class="literal">NO</span>;</span><br><span class="line">        <span class="built_in">CGAffineTransform</span> secondTransform = SecondAssetTrack.preferredTransform;</span><br><span class="line">        <span class="keyword">if</span>(secondTransform.a == <span class="number">0</span> &amp;&amp; secondTransform.b == <span class="number">1.0</span> &amp;&amp; secondTransform.c == <span class="number">-1.0</span> &amp;&amp; secondTransform.d == <span class="number">0</span>)  &#123;SecondAssetOrientation_= <span class="built_in">UIImageOrientationRight</span>; isSecondAssetPortrait_ = <span class="literal">YES</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(secondTransform.a == <span class="number">0</span> &amp;&amp; secondTransform.b == <span class="number">-1.0</span> &amp;&amp; secondTransform.c == <span class="number">1.0</span> &amp;&amp; secondTransform.d == <span class="number">0</span>)  &#123;SecondAssetOrientation_ =  <span class="built_in">UIImageOrientationLeft</span>; isSecondAssetPortrait_ = <span class="literal">YES</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(secondTransform.a == <span class="number">1.0</span> &amp;&amp; secondTransform.b == <span class="number">0</span> &amp;&amp; secondTransform.c == <span class="number">0</span> &amp;&amp; secondTransform.d == <span class="number">1.0</span>)   &#123;SecondAssetOrientation_ =  <span class="built_in">UIImageOrientationUp</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(secondTransform.a == <span class="number">-1.0</span> &amp;&amp; secondTransform.b == <span class="number">0</span> &amp;&amp; secondTransform.c == <span class="number">0</span> &amp;&amp; secondTransform.d == <span class="number">-1.0</span>) &#123;SecondAssetOrientation_ = <span class="built_in">UIImageOrientationDown</span>;&#125;</span><br><span class="line">        <span class="built_in">CGFloat</span> SecondAssetScaleToFitRatio = <span class="number">320.0</span>/SecondAssetTrack.naturalSize.width;</span><br><span class="line">        <span class="keyword">if</span>(isSecondAssetPortrait_)&#123;</span><br><span class="line">            SecondAssetScaleToFitRatio = <span class="number">320.0</span>/SecondAssetTrack.naturalSize.height;</span><br><span class="line">            <span class="built_in">CGAffineTransform</span> SecondAssetScaleFactor = <span class="built_in">CGAffineTransformMakeScale</span>(SecondAssetScaleToFitRatio,SecondAssetScaleToFitRatio);</span><br><span class="line">            [SecondlayerInstruction setTransform:<span class="built_in">CGAffineTransformConcat</span>(SecondAssetTrack.preferredTransform, SecondAssetScaleFactor) atTime:firstAsset.duration];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            ;</span><br><span class="line">            <span class="built_in">CGAffineTransform</span> SecondAssetScaleFactor = <span class="built_in">CGAffineTransformMakeScale</span>(SecondAssetScaleToFitRatio,SecondAssetScaleToFitRatio);</span><br><span class="line">            [SecondlayerInstruction setTransform:<span class="built_in">CGAffineTransformConcat</span>(<span class="built_in">CGAffineTransformConcat</span>(SecondAssetTrack.preferredTransform, SecondAssetScaleFactor),<span class="built_in">CGAffineTransformMakeTranslation</span>(<span class="number">0</span>, <span class="number">160</span>)) atTime:firstAsset.duration];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">       </span><br><span class="line">        MainInstruction.layerInstructions = [<span class="built_in">NSArray</span> arrayWithObjects:FirstlayerInstruction,SecondlayerInstruction,<span class="literal">nil</span>];;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5 - Mergo AVMutableVideoCompositionLayerInstruction into AVMutableVideoComposition</span></span><br><span class="line">        <span class="comment">// AVMutableComposition is a mutable subclass of AVComposition you use when you want to create a new composition from existing assets. You can add and remove tracks, and you can add, remove, and scale time ranges.</span></span><br><span class="line">        <span class="built_in">AVMutableVideoComposition</span> *MainCompositionInst = [<span class="built_in">AVMutableVideoComposition</span> videoComposition];</span><br><span class="line">        MainCompositionInst.instructions = [<span class="built_in">NSArray</span> arrayWithObject:MainInstruction];</span><br><span class="line">        MainCompositionInst.frameDuration = <span class="built_in">CMTimeMake</span>(<span class="number">1</span>, <span class="number">30</span>);</span><br><span class="line">        MainCompositionInst.renderSize = <span class="built_in">CGSizeMake</span>(<span class="number">320.0</span>, <span class="number">480.0</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 6 - Get path</span></span><br><span class="line">        <span class="built_in">NSArray</span> *paths = <span class="built_in">NSSearchPathForDirectoriesInDomains</span>(<span class="built_in">NSDocumentDirectory</span>, <span class="built_in">NSUserDomainMask</span>, <span class="literal">YES</span>);</span><br><span class="line">        <span class="built_in">NSString</span> *documentsDirectory = [paths objectAtIndex:<span class="number">0</span>];	</span><br><span class="line">        <span class="built_in">NSString</span> *myPathDocs =  [documentsDirectory stringByAppendingPathComponent:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@&quot;mergeVideo-%d.mov&quot;</span>,arc4random() % <span class="number">1000</span>]];</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> fileURLWithPath:myPathDocs];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 7 - Create exporter with AVAssetExportSession</span></span><br><span class="line">        <span class="comment">// An AVAssetExportSession object transcodes the contents of an AVAsset source object to create an output of the form described by a specified export preset.</span></span><br><span class="line">        <span class="built_in">AVAssetExportSession</span> *exporter = [[<span class="built_in">AVAssetExportSession</span> alloc] initWithAsset:mixComposition presetName:<span class="built_in">AVAssetExportPresetHighestQuality</span>];</span><br><span class="line">        exporter.outputURL=url;</span><br><span class="line">        exporter.outputFileType = <span class="built_in">AVFileTypeQuickTimeMovie</span>;</span><br><span class="line">        exporter.videoComposition = MainCompositionInst;</span><br><span class="line">        exporter.shouldOptimizeForNetworkUse = <span class="literal">YES</span>;</span><br><span class="line">        [exporter exportAsynchronouslyWithCompletionHandler:^</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                 [<span class="keyword">self</span> exportDidFinish:exporter];</span><br><span class="line">             &#125;);</span><br><span class="line">         &#125;];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// exportDidFinish method: save the mergo video to Photos Album</span></span><br><span class="line">- (<span class="type">void</span>)exportDidFinish:(<span class="built_in">AVAssetExportSession</span>*)session &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(session.status == <span class="built_in">AVAssetExportSessionStatusCompleted</span>) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSURL</span> *outputURL = session.outputURL;</span><br><span class="line">        <span class="comment">// 8 - Output video</span></span><br><span class="line">        <span class="comment">// An instance of ALAssetsLibrary provides access to the videos and photos that are under the control of the Photos application.</span></span><br><span class="line">        ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:outputURL]) &#123;</span><br><span class="line">            </span><br><span class="line">            [library writeVideoAtPathToSavedPhotosAlbum:outputURL</span><br><span class="line">                                        completionBlock:^(<span class="built_in">NSURL</span> *assetURL, <span class="built_in">NSError</span> *error)&#123;</span><br><span class="line">                                            <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                                                <span class="keyword">if</span> (error) &#123;</span><br><span class="line">                                                    <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc] initWithTitle:<span class="string">@&quot;Error&quot;</span> message:<span class="string">@&quot;Video Saving Failed&quot;</span>  delegate:<span class="literal">nil</span> cancelButtonTitle:<span class="string">@&quot;Ok&quot;</span> otherButtonTitles: <span class="literal">nil</span>, <span class="literal">nil</span>];</span><br><span class="line">                                                    [alert show];</span><br><span class="line">                                                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                                                    <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc] initWithTitle:<span class="string">@&quot;Video Saved&quot;</span> message:<span class="string">@&quot;Saved To Photo Album&quot;</span>  delegate:<span class="keyword">self</span> cancelButtonTitle:<span class="string">@&quot;Ok&quot;</span> otherButtonTitles: <span class="literal">nil</span>];</span><br><span class="line">                                                    [alert show];</span><br><span class="line">                                                     &#125;</span><br><span class="line">                                                </span><br><span class="line">                                            &#125;);</span><br><span class="line">                                            </span><br><span class="line">                                        &#125;];</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    audioAsset = <span class="literal">nil</span>;</span><br><span class="line">    firstAsset = <span class="literal">nil</span>;</span><br><span class="line">    secondAsset = <span class="literal">nil</span>;</span><br><span class="line">    [ActivityView stopAnimating];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/12/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/14/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Ge Will</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  





</body>
</html>
